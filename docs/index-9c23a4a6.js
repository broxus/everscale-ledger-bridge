(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function Ir(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var M={},We={};We.byteLength=Jr;We.toByteArray=en;We.fromByteArray=nn;var ne=[],z=[],zr=typeof Uint8Array<"u"?Uint8Array:Array,lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var we=0,Zr=lt.length;we<Zr;++we)ne[we]=lt[we],z[lt.charCodeAt(we)]=we;z["-".charCodeAt(0)]=62;z["_".charCodeAt(0)]=63;function xr(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=i.indexOf("=");r===-1&&(r=e);var s=r===e?0:4-r%4;return[r,s]}function Jr(i){var e=xr(i),r=e[0],s=e[1];return(r+s)*3/4-s}function Qr(i,e,r){return(e+r)*3/4-r}function en(i){var e,r=xr(i),s=r[0],a=r[1],l=new zr(Qr(i,s,a)),h=0,c=a>0?s-4:s,p;for(p=0;p<c;p+=4)e=z[i.charCodeAt(p)]<<18|z[i.charCodeAt(p+1)]<<12|z[i.charCodeAt(p+2)]<<6|z[i.charCodeAt(p+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=e&255;return a===2&&(e=z[i.charCodeAt(p)]<<2|z[i.charCodeAt(p+1)]>>4,l[h++]=e&255),a===1&&(e=z[i.charCodeAt(p)]<<10|z[i.charCodeAt(p+1)]<<4|z[i.charCodeAt(p+2)]>>2,l[h++]=e>>8&255,l[h++]=e&255),l}function tn(i){return ne[i>>18&63]+ne[i>>12&63]+ne[i>>6&63]+ne[i&63]}function rn(i,e,r){for(var s,a=[],l=e;l<r;l+=3)s=(i[l]<<16&16711680)+(i[l+1]<<8&65280)+(i[l+2]&255),a.push(tn(s));return a.join("")}function nn(i){for(var e,r=i.length,s=r%3,a=[],l=16383,h=0,c=r-s;h<c;h+=l)a.push(rn(i,h,h+l>c?c:h+l));return s===1?(e=i[r-1],a.push(ne[e>>2]+ne[e<<4&63]+"==")):s===2&&(e=(i[r-2]<<8)+i[r-1],a.push(ne[e>>10]+ne[e>>4&63]+ne[e<<2&63]+"=")),a.join("")}var xt={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */xt.read=function(i,e,r,s,a){var l,h,c=a*8-s-1,p=(1<<c)-1,E=p>>1,g=-7,y=r?a-1:0,N=r?-1:1,I=i[e+y];for(y+=N,l=I&(1<<-g)-1,I>>=-g,g+=c;g>0;l=l*256+i[e+y],y+=N,g-=8);for(h=l&(1<<-g)-1,l>>=-g,g+=s;g>0;h=h*256+i[e+y],y+=N,g-=8);if(l===0)l=1-E;else{if(l===p)return h?NaN:(I?-1:1)*(1/0);h=h+Math.pow(2,s),l=l-E}return(I?-1:1)*h*Math.pow(2,l-s)};xt.write=function(i,e,r,s,a,l){var h,c,p,E=l*8-a-1,g=(1<<E)-1,y=g>>1,N=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=s?0:l-1,v=s?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,h=g):(h=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-h))<1&&(h--,p*=2),h+y>=1?e+=N/p:e+=N*Math.pow(2,1-y),e*p>=2&&(h++,p/=2),h+y>=g?(c=0,h=g):h+y>=1?(c=(e*p-1)*Math.pow(2,a),h=h+y):(c=e*Math.pow(2,y-1)*Math.pow(2,a),h=0));a>=8;i[r+I]=c&255,I+=v,c/=256,a-=8);for(h=h<<a|c,E+=a;E>0;i[r+I]=h&255,I+=v,h/=256,E-=8);i[r+I-v]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=We,r=xt,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=c,i.SlowBuffer=_,i.INSPECT_MAX_BYTES=50;const a=2147483647;i.kMaxLength=a,c.TYPED_ARRAY_SUPPORT=l(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const o=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(o,t),o.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function h(o){if(o>a)throw new RangeError('The value "'+o+'" is invalid for option "size"');const t=new Uint8Array(o);return Object.setPrototypeOf(t,c.prototype),t}function c(o,t,n){if(typeof o=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(o)}return p(o,t,n)}c.poolSize=8192;function p(o,t,n){if(typeof o=="string")return N(o,t);if(ArrayBuffer.isView(o))return v(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(ee(o,ArrayBuffer)||o&&ee(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(o,SharedArrayBuffer)||o&&ee(o.buffer,SharedArrayBuffer)))return k(o,t,n);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const u=o.valueOf&&o.valueOf();if(u!=null&&u!==o)return c.from(u,t,n);const f=V(o);if(f)return f;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return c.from(o[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}c.from=function(o,t,n){return p(o,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function E(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function g(o,t,n){return E(o),o<=0?h(o):t!==void 0?typeof n=="string"?h(o).fill(t,n):h(o).fill(t):h(o)}c.alloc=function(o,t,n){return g(o,t,n)};function y(o){return E(o),h(o<0?0:H(o)|0)}c.allocUnsafe=function(o){return y(o)},c.allocUnsafeSlow=function(o){return y(o)};function N(o,t){if((typeof t!="string"||t==="")&&(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=Y(o,t)|0;let u=h(n);const f=u.write(o,t);return f!==n&&(u=u.slice(0,f)),u}function I(o){const t=o.length<0?0:H(o.length)|0,n=h(t);for(let u=0;u<t;u+=1)n[u]=o[u]&255;return n}function v(o){if(ee(o,Uint8Array)){const t=new Uint8Array(o);return k(t.buffer,t.byteOffset,t.byteLength)}return I(o)}function k(o,t,n){if(t<0||o.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let u;return t===void 0&&n===void 0?u=new Uint8Array(o):n===void 0?u=new Uint8Array(o,t):u=new Uint8Array(o,t,n),Object.setPrototypeOf(u,c.prototype),u}function V(o){if(c.isBuffer(o)){const t=H(o.length)|0,n=h(t);return n.length===0||o.copy(n,0,0,t),n}if(o.length!==void 0)return typeof o.length!="number"||ut(o.length)?h(0):I(o);if(o.type==="Buffer"&&Array.isArray(o.data))return I(o.data)}function H(o){if(o>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return o|0}function _(o){return+o!=o&&(o=0),c.alloc(+o)}c.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==c.prototype},c.compare=function(t,n){if(ee(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),ee(n,Uint8Array)&&(n=c.from(n,n.offset,n.byteLength)),!c.isBuffer(t)||!c.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let u=t.length,f=n.length;for(let d=0,m=Math.min(u,f);d<m;++d)if(t[d]!==n[d]){u=t[d],f=n[d];break}return u<f?-1:f<u?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return c.alloc(0);let u;if(n===void 0)for(n=0,u=0;u<t.length;++u)n+=t[u].length;const f=c.allocUnsafe(n);let d=0;for(u=0;u<t.length;++u){let m=t[u];if(ee(m,Uint8Array))d+m.length>f.length?(c.isBuffer(m)||(m=c.from(m)),m.copy(f,d)):Uint8Array.prototype.set.call(f,m,d);else if(c.isBuffer(m))m.copy(f,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=m.length}return f};function Y(o,t){if(c.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||ee(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);const n=o.length,u=arguments.length>2&&arguments[2]===!0;if(!u&&n===0)return 0;let f=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return ct(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return Dt(o).length;default:if(f)return u?-1:ct(o).length;t=(""+t).toLowerCase(),f=!0}}c.byteLength=Y;function ce(o,t,n){let u=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(o||(o="utf8");;)switch(o){case"hex":return S(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return $(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,n);default:if(u)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),u=!0}}c.prototype._isBuffer=!0;function ie(o,t,n){const u=o[t];o[t]=o[n],o[n]=u}c.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)ie(this,n,n+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)ie(this,n,n+3),ie(this,n+1,n+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)ie(this,n,n+7),ie(this,n+1,n+6),ie(this,n+2,n+5),ie(this,n+3,n+4);return this},c.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?w(this,0,t):ce.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:c.compare(this,t)===0},c.prototype.inspect=function(){let t="";const n=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(t,n,u,f,d){if(ee(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),u===void 0&&(u=t?t.length:0),f===void 0&&(f=0),d===void 0&&(d=this.length),n<0||u>t.length||f<0||d>this.length)throw new RangeError("out of range index");if(f>=d&&n>=u)return 0;if(f>=d)return-1;if(n>=u)return 1;if(n>>>=0,u>>>=0,f>>>=0,d>>>=0,this===t)return 0;let m=d-f,B=u-n;const G=Math.min(m,B),D=this.slice(f,d),j=t.slice(n,u);for(let F=0;F<G;++F)if(D[F]!==j[F]){m=D[F],B=j[F];break}return m<B?-1:B<m?1:0};function Ue(o,t,n,u,f){if(o.length===0)return-1;if(typeof n=="string"?(u=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,ut(n)&&(n=f?0:o.length-1),n<0&&(n=o.length+n),n>=o.length){if(f)return-1;n=o.length-1}else if(n<0)if(f)n=0;else return-1;if(typeof t=="string"&&(t=c.from(t,u)),c.isBuffer(t))return t.length===0?-1:be(o,t,n,u,f);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?f?Uint8Array.prototype.indexOf.call(o,t,n):Uint8Array.prototype.lastIndexOf.call(o,t,n):be(o,[t],n,u,f);throw new TypeError("val must be string, number or Buffer")}function be(o,t,n,u,f){let d=1,m=o.length,B=t.length;if(u!==void 0&&(u=String(u).toLowerCase(),u==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(o.length<2||t.length<2)return-1;d=2,m/=2,B/=2,n/=2}function G(j,F){return d===1?j[F]:j.readUInt16BE(F*d)}let D;if(f){let j=-1;for(D=n;D<m;D++)if(G(o,D)===G(t,j===-1?0:D-j)){if(j===-1&&(j=D),D-j+1===B)return j*d}else j!==-1&&(D-=D-j),j=-1}else for(n+B>m&&(n=m-B),D=n;D>=0;D--){let j=!0;for(let F=0;F<B;F++)if(G(o,D+F)!==G(t,F)){j=!1;break}if(j)return D}return-1}c.prototype.includes=function(t,n,u){return this.indexOf(t,n,u)!==-1},c.prototype.indexOf=function(t,n,u){return Ue(this,t,n,u,!0)},c.prototype.lastIndexOf=function(t,n,u){return Ue(this,t,n,u,!1)};function tt(o,t,n,u){n=Number(n)||0;const f=o.length-n;u?(u=Number(u),u>f&&(u=f)):u=f;const d=t.length;u>d/2&&(u=d/2);let m;for(m=0;m<u;++m){const B=parseInt(t.substr(m*2,2),16);if(ut(B))return m;o[n+m]=B}return m}function rt(o,t,n,u){return Fe(ct(t,o.length-n),o,n,u)}function nt(o,t,n,u){return Fe(qr(t),o,n,u)}function it(o,t,n,u){return Fe(Dt(t),o,n,u)}function st(o,t,n,u){return Fe(Wr(t,o.length-n),o,n,u)}c.prototype.write=function(t,n,u,f){if(n===void 0)f="utf8",u=this.length,n=0;else if(u===void 0&&typeof n=="string")f=n,u=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(u)?(u=u>>>0,f===void 0&&(f="utf8")):(f=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const d=this.length-n;if((u===void 0||u>d)&&(u=d),t.length>0&&(u<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");f||(f="utf8");let m=!1;for(;;)switch(f){case"hex":return tt(this,t,n,u);case"utf8":case"utf-8":return rt(this,t,n,u);case"ascii":case"latin1":case"binary":return nt(this,t,n,u);case"base64":return it(this,t,n,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return st(this,t,n,u);default:if(m)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase(),m=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(o,t,n){return t===0&&n===o.length?e.fromByteArray(o):e.fromByteArray(o.slice(t,n))}function w(o,t,n){n=Math.min(o.length,n);const u=[];let f=t;for(;f<n;){const d=o[f];let m=null,B=d>239?4:d>223?3:d>191?2:1;if(f+B<=n){let G,D,j,F;switch(B){case 1:d<128&&(m=d);break;case 2:G=o[f+1],(G&192)===128&&(F=(d&31)<<6|G&63,F>127&&(m=F));break;case 3:G=o[f+1],D=o[f+2],(G&192)===128&&(D&192)===128&&(F=(d&15)<<12|(G&63)<<6|D&63,F>2047&&(F<55296||F>57343)&&(m=F));break;case 4:G=o[f+1],D=o[f+2],j=o[f+3],(G&192)===128&&(D&192)===128&&(j&192)===128&&(F=(d&15)<<18|(G&63)<<12|(D&63)<<6|j&63,F>65535&&F<1114112&&(m=F))}}m===null?(m=65533,B=1):m>65535&&(m-=65536,u.push(m>>>10&1023|55296),m=56320|m&1023),u.push(m),f+=B}return A(u)}const T=4096;function A(o){const t=o.length;if(t<=T)return String.fromCharCode.apply(String,o);let n="",u=0;for(;u<t;)n+=String.fromCharCode.apply(String,o.slice(u,u+=T));return n}function $(o,t,n){let u="";n=Math.min(o.length,n);for(let f=t;f<n;++f)u+=String.fromCharCode(o[f]&127);return u}function R(o,t,n){let u="";n=Math.min(o.length,n);for(let f=t;f<n;++f)u+=String.fromCharCode(o[f]);return u}function S(o,t,n){const u=o.length;(!t||t<0)&&(t=0),(!n||n<0||n>u)&&(n=u);let f="";for(let d=t;d<n;++d)f+=Kr[o[d]];return f}function U(o,t,n){const u=o.slice(t,n);let f="";for(let d=0;d<u.length-1;d+=2)f+=String.fromCharCode(u[d]+u[d+1]*256);return f}c.prototype.slice=function(t,n){const u=this.length;t=~~t,n=n===void 0?u:~~n,t<0?(t+=u,t<0&&(t=0)):t>u&&(t=u),n<0?(n+=u,n<0&&(n=0)):n>u&&(n=u),n<t&&(n=t);const f=this.subarray(t,n);return Object.setPrototypeOf(f,c.prototype),f};function L(o,t,n){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+t>n)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(t,n,u){t=t>>>0,n=n>>>0,u||L(t,n,this.length);let f=this[t],d=1,m=0;for(;++m<n&&(d*=256);)f+=this[t+m]*d;return f},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,n,u){t=t>>>0,n=n>>>0,u||L(t,n,this.length);let f=this[t+--n],d=1;for(;n>0&&(d*=256);)f+=this[t+--n]*d;return f},c.prototype.readUint8=c.prototype.readUInt8=function(t,n){return t=t>>>0,n||L(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||L(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||L(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||L(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=le(function(t){t=t>>>0,ye(t,"offset");const n=this[t],u=this[t+7];(n===void 0||u===void 0)&&$e(t,this.length-8);const f=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,d=this[++t]+this[++t]*2**8+this[++t]*2**16+u*2**24;return BigInt(f)+(BigInt(d)<<BigInt(32))}),c.prototype.readBigUInt64BE=le(function(t){t=t>>>0,ye(t,"offset");const n=this[t],u=this[t+7];(n===void 0||u===void 0)&&$e(t,this.length-8);const f=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],d=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+u;return(BigInt(f)<<BigInt(32))+BigInt(d)}),c.prototype.readIntLE=function(t,n,u){t=t>>>0,n=n>>>0,u||L(t,n,this.length);let f=this[t],d=1,m=0;for(;++m<n&&(d*=256);)f+=this[t+m]*d;return d*=128,f>=d&&(f-=Math.pow(2,8*n)),f},c.prototype.readIntBE=function(t,n,u){t=t>>>0,n=n>>>0,u||L(t,n,this.length);let f=n,d=1,m=this[t+--f];for(;f>0&&(d*=256);)m+=this[t+--f]*d;return d*=128,m>=d&&(m-=Math.pow(2,8*n)),m},c.prototype.readInt8=function(t,n){return t=t>>>0,n||L(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},c.prototype.readInt16LE=function(t,n){t=t>>>0,n||L(t,2,this.length);const u=this[t]|this[t+1]<<8;return u&32768?u|4294901760:u},c.prototype.readInt16BE=function(t,n){t=t>>>0,n||L(t,2,this.length);const u=this[t+1]|this[t]<<8;return u&32768?u|4294901760:u},c.prototype.readInt32LE=function(t,n){return t=t>>>0,n||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,n){return t=t>>>0,n||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=le(function(t){t=t>>>0,ye(t,"offset");const n=this[t],u=this[t+7];(n===void 0||u===void 0)&&$e(t,this.length-8);const f=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(u<<24);return(BigInt(f)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),c.prototype.readBigInt64BE=le(function(t){t=t>>>0,ye(t,"offset");const n=this[t],u=this[t+7];(n===void 0||u===void 0)&&$e(t,this.length-8);const f=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(f)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+u)}),c.prototype.readFloatLE=function(t,n){return t=t>>>0,n||L(t,4,this.length),r.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,n){return t=t>>>0,n||L(t,4,this.length),r.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||L(t,8,this.length),r.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||L(t,8,this.length),r.read(this,t,!1,52,8)};function O(o,t,n,u,f,d){if(!c.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>f||t<d)throw new RangeError('"value" argument is out of bounds');if(n+u>o.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,n,u,f){if(t=+t,n=n>>>0,u=u>>>0,!f){const B=Math.pow(2,8*u)-1;O(this,t,n,u,B,0)}let d=1,m=0;for(this[n]=t&255;++m<u&&(d*=256);)this[n+m]=t/d&255;return n+u},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,n,u,f){if(t=+t,n=n>>>0,u=u>>>0,!f){const B=Math.pow(2,8*u)-1;O(this,t,n,u,B,0)}let d=u-1,m=1;for(this[n+d]=t&255;--d>=0&&(m*=256);)this[n+d]=t/m&255;return n+u},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,n,u){return t=+t,n=n>>>0,u||O(this,t,n,1,255,0),this[n]=t&255,n+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,n,u){return t=+t,n=n>>>0,u||O(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,n,u){return t=+t,n=n>>>0,u||O(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,n,u){return t=+t,n=n>>>0,u||O(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,n,u){return t=+t,n=n>>>0,u||O(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function W(o,t,n,u,f){Ft(t,u,f,o,n,7);let d=Number(t&BigInt(4294967295));o[n++]=d,d=d>>8,o[n++]=d,d=d>>8,o[n++]=d,d=d>>8,o[n++]=d;let m=Number(t>>BigInt(32)&BigInt(4294967295));return o[n++]=m,m=m>>8,o[n++]=m,m=m>>8,o[n++]=m,m=m>>8,o[n++]=m,n}function P(o,t,n,u,f){Ft(t,u,f,o,n,7);let d=Number(t&BigInt(4294967295));o[n+7]=d,d=d>>8,o[n+6]=d,d=d>>8,o[n+5]=d,d=d>>8,o[n+4]=d;let m=Number(t>>BigInt(32)&BigInt(4294967295));return o[n+3]=m,m=m>>8,o[n+2]=m,m=m>>8,o[n+1]=m,m=m>>8,o[n]=m,n+8}c.prototype.writeBigUInt64LE=le(function(t,n=0){return W(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=le(function(t,n=0){return P(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(t,n,u,f){if(t=+t,n=n>>>0,!f){const G=Math.pow(2,8*u-1);O(this,t,n,u,G-1,-G)}let d=0,m=1,B=0;for(this[n]=t&255;++d<u&&(m*=256);)t<0&&B===0&&this[n+d-1]!==0&&(B=1),this[n+d]=(t/m>>0)-B&255;return n+u},c.prototype.writeIntBE=function(t,n,u,f){if(t=+t,n=n>>>0,!f){const G=Math.pow(2,8*u-1);O(this,t,n,u,G-1,-G)}let d=u-1,m=1,B=0;for(this[n+d]=t&255;--d>=0&&(m*=256);)t<0&&B===0&&this[n+d+1]!==0&&(B=1),this[n+d]=(t/m>>0)-B&255;return n+u},c.prototype.writeInt8=function(t,n,u){return t=+t,n=n>>>0,u||O(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1},c.prototype.writeInt16LE=function(t,n,u){return t=+t,n=n>>>0,u||O(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2},c.prototype.writeInt16BE=function(t,n,u){return t=+t,n=n>>>0,u||O(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2},c.prototype.writeInt32LE=function(t,n,u){return t=+t,n=n>>>0,u||O(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4},c.prototype.writeInt32BE=function(t,n,u){return t=+t,n=n>>>0,u||O(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4},c.prototype.writeBigInt64LE=le(function(t,n=0){return W(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=le(function(t,n=0){return P(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ue(o,t,n,u,f,d){if(n+u>o.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function ot(o,t,n,u,f){return t=+t,n=n>>>0,f||ue(o,t,n,4),r.write(o,t,n,u,23,4),n+4}c.prototype.writeFloatLE=function(t,n,u){return ot(this,t,n,!0,u)},c.prototype.writeFloatBE=function(t,n,u){return ot(this,t,n,!1,u)};function Ut(o,t,n,u,f){return t=+t,n=n>>>0,f||ue(o,t,n,8),r.write(o,t,n,u,52,8),n+8}c.prototype.writeDoubleLE=function(t,n,u){return Ut(this,t,n,!0,u)},c.prototype.writeDoubleBE=function(t,n,u){return Ut(this,t,n,!1,u)},c.prototype.copy=function(t,n,u,f){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(u||(u=0),!f&&f!==0&&(f=this.length),n>=t.length&&(n=t.length),n||(n=0),f>0&&f<u&&(f=u),f===u||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length),t.length-n<f-u&&(f=t.length-n+u);const d=f-u;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,u,f):Uint8Array.prototype.set.call(t,this.subarray(u,f),n),d},c.prototype.fill=function(t,n,u,f){if(typeof t=="string"){if(typeof n=="string"?(f=n,n=0,u=this.length):typeof u=="string"&&(f=u,u=this.length),f!==void 0&&typeof f!="string")throw new TypeError("encoding must be a string");if(typeof f=="string"&&!c.isEncoding(f))throw new TypeError("Unknown encoding: "+f);if(t.length===1){const m=t.charCodeAt(0);(f==="utf8"&&m<128||f==="latin1")&&(t=m)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<u)throw new RangeError("Out of range index");if(u<=n)return this;n=n>>>0,u=u===void 0?this.length:u>>>0,t||(t=0);let d;if(typeof t=="number")for(d=n;d<u;++d)this[d]=t;else{const m=c.isBuffer(t)?t:c.from(t,f),B=m.length;if(B===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(d=0;d<u-n;++d)this[d+n]=m[d%B]}return this};const me={};function at(o,t,n){me[o]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,this.stack,delete this.name}get code(){return o}set code(f){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:f,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}}}at("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),at("ERR_INVALID_ARG_TYPE",function(o,t){return`The "${o}" argument must be of type number. Received type ${typeof t}`},TypeError),at("ERR_OUT_OF_RANGE",function(o,t,n){let u=`The value of "${o}" is out of range.`,f=n;return Number.isInteger(n)&&Math.abs(n)>2**32?f=bt(String(n)):typeof n=="bigint"&&(f=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(f=bt(f)),f+="n"),u+=` It must be ${t}. Received ${f}`,u},RangeError);function bt(o){let t="",n=o.length;const u=o[0]==="-"?1:0;for(;n>=u+4;n-=3)t=`_${o.slice(n-3,n)}${t}`;return`${o.slice(0,n)}${t}`}function Vr(o,t,n){ye(t,"offset"),(o[t]===void 0||o[t+n]===void 0)&&$e(t,o.length-(n+1))}function Ft(o,t,n,u,f,d){if(o>n||o<t){const m=typeof t=="bigint"?"n":"";let B;throw d>3?t===0||t===BigInt(0)?B=`>= 0${m} and < 2${m} ** ${(d+1)*8}${m}`:B=`>= -(2${m} ** ${(d+1)*8-1}${m}) and < 2 ** ${(d+1)*8-1}${m}`:B=`>= ${t}${m} and <= ${n}${m}`,new me.ERR_OUT_OF_RANGE("value",B,o)}Vr(u,f,d)}function ye(o,t){if(typeof o!="number")throw new me.ERR_INVALID_ARG_TYPE(t,"number",o)}function $e(o,t,n){throw Math.floor(o)!==o?(ye(o,n),new me.ERR_OUT_OF_RANGE(n||"offset","an integer",o)):t<0?new me.ERR_BUFFER_OUT_OF_BOUNDS:new me.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,o)}const Xr=/[^+/0-9A-Za-z-_]/g;function Hr(o){if(o=o.split("=")[0],o=o.trim().replace(Xr,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function ct(o,t){t=t||1/0;let n;const u=o.length;let f=null;const d=[];for(let m=0;m<u;++m){if(n=o.charCodeAt(m),n>55295&&n<57344){if(!f){if(n>56319){(t-=3)>-1&&d.push(239,191,189);continue}else if(m+1===u){(t-=3)>-1&&d.push(239,191,189);continue}f=n;continue}if(n<56320){(t-=3)>-1&&d.push(239,191,189),f=n;continue}n=(f-55296<<10|n-56320)+65536}else f&&(t-=3)>-1&&d.push(239,191,189);if(f=null,n<128){if((t-=1)<0)break;d.push(n)}else if(n<2048){if((t-=2)<0)break;d.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;d.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;d.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return d}function qr(o){const t=[];for(let n=0;n<o.length;++n)t.push(o.charCodeAt(n)&255);return t}function Wr(o,t){let n,u,f;const d=[];for(let m=0;m<o.length&&!((t-=2)<0);++m)n=o.charCodeAt(m),u=n>>8,f=n%256,d.push(f),d.push(u);return d}function Dt(o){return e.toByteArray(Hr(o))}function Fe(o,t,n,u){let f;for(f=0;f<u&&!(f+n>=t.length||f>=o.length);++f)t[f+n]=o[f];return f}function ee(o,t){return o instanceof t||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===t.name}function ut(o){return o!==o}const Kr=function(){const o="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const u=n*16;for(let f=0;f<16;++f)t[u+f]=o[n]+o[f]}return t}();function le(o){return typeof BigInt>"u"?Yr:o}function Yr(){throw new Error("BigInt not supported")}})(M);window.Buffer=M.Buffer;var vt={exports:{}},ve=typeof Reflect=="object"?Reflect:null,Pt=ve&&typeof ve.apply=="function"?ve.apply:function(e,r,s){return Function.prototype.apply.call(e,r,s)},Xe;ve&&typeof ve.ownKeys=="function"?Xe=ve.ownKeys:Object.getOwnPropertySymbols?Xe=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Xe=function(e){return Object.getOwnPropertyNames(e)};function sn(i){console&&console.warn&&console.warn(i)}var vr=Number.isNaN||function(e){return e!==e};function b(){b.init.call(this)}vt.exports=b;vt.exports.once=un;b.EventEmitter=b;b.prototype._events=void 0;b.prototype._eventsCount=0;b.prototype._maxListeners=void 0;var Mt=10;function Ke(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return Mt},set:function(i){if(typeof i!="number"||i<0||vr(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Mt=i}});b.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};b.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||vr(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Rr(i){return i._maxListeners===void 0?b.defaultMaxListeners:i._maxListeners}b.prototype.getMaxListeners=function(){return Rr(this)};b.prototype.emit=function(e){for(var r=[],s=1;s<arguments.length;s++)r.push(arguments[s]);var a=e==="error",l=this._events;if(l!==void 0)a=a&&l.error===void 0;else if(!a)return!1;if(a){var h;if(r.length>0&&(h=r[0]),h instanceof Error)throw h;var c=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw c.context=h,c}var p=l[e];if(p===void 0)return!1;if(typeof p=="function")Pt(p,this,r);else for(var E=p.length,g=Sr(p,E),s=0;s<E;++s)Pt(g[s],this,r);return!0};function Lr(i,e,r,s){var a,l,h;if(Ke(r),l=i._events,l===void 0?(l=i._events=Object.create(null),i._eventsCount=0):(l.newListener!==void 0&&(i.emit("newListener",e,r.listener?r.listener:r),l=i._events),h=l[e]),h===void 0)h=l[e]=r,++i._eventsCount;else if(typeof h=="function"?h=l[e]=s?[r,h]:[h,r]:s?h.unshift(r):h.push(r),a=Rr(i),a>0&&h.length>a&&!h.warned){h.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=i,c.type=e,c.count=h.length,sn(c)}return i}b.prototype.addListener=function(e,r){return Lr(this,e,r,!1)};b.prototype.on=b.prototype.addListener;b.prototype.prependListener=function(e,r){return Lr(this,e,r,!0)};function on(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ar(i,e,r){var s={fired:!1,wrapFn:void 0,target:i,type:e,listener:r},a=on.bind(s);return a.listener=r,s.wrapFn=a,a}b.prototype.once=function(e,r){return Ke(r),this.on(e,Ar(this,e,r)),this};b.prototype.prependOnceListener=function(e,r){return Ke(r),this.prependListener(e,Ar(this,e,r)),this};b.prototype.removeListener=function(e,r){var s,a,l,h,c;if(Ke(r),a=this._events,a===void 0)return this;if(s=a[e],s===void 0)return this;if(s===r||s.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,s.listener||r));else if(typeof s!="function"){for(l=-1,h=s.length-1;h>=0;h--)if(s[h]===r||s[h].listener===r){c=s[h].listener,l=h;break}if(l<0)return this;l===0?s.shift():an(s,l),s.length===1&&(a[e]=s[0]),a.removeListener!==void 0&&this.emit("removeListener",e,c||r)}return this};b.prototype.off=b.prototype.removeListener;b.prototype.removeAllListeners=function(e){var r,s,a;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var l=Object.keys(s),h;for(a=0;a<l.length;++a)h=l[a],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=s[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this};function $r(i,e,r){var s=i._events;if(s===void 0)return[];var a=s[e];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?cn(a):Sr(a,a.length)}b.prototype.listeners=function(e){return $r(this,e,!0)};b.prototype.rawListeners=function(e){return $r(this,e,!1)};b.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Tr.call(i,e)};b.prototype.listenerCount=Tr;function Tr(i){var e=this._events;if(e!==void 0){var r=e[i];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}b.prototype.eventNames=function(){return this._eventsCount>0?Xe(this._events):[]};function Sr(i,e){for(var r=new Array(e),s=0;s<e;++s)r[s]=i[s];return r}function an(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function cn(i){for(var e=new Array(i.length),r=0;r<e.length;++r)e[r]=i[r].listener||i[r];return e}function un(i,e){return new Promise(function(r,s){function a(h){i.removeListener(e,l),s(h)}function l(){typeof i.removeListener=="function"&&i.removeListener("error",a),r([].slice.call(arguments))}Nr(i,e,l,{once:!0}),e!=="error"&&ln(i,a,{once:!0})})}function ln(i,e,r){typeof i.on=="function"&&Nr(i,"error",e,r)}function Nr(i,e,r,s){if(typeof i.on=="function")s.once?i.once(e,r):i.on(e,r);else if(typeof i.addEventListener=="function")i.addEventListener(e,function a(l){s.once&&i.removeEventListener(e,a),r(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var hn=vt.exports;const fn=Ir(hn),Ye=i=>{class e extends Error{constructor(s,a,l){if(super(s||i,l),Object.setPrototypeOf(this,e.prototype),this.name=i,a)for(const h in a)this[h]=a[h];if(l&&pn(l)&&"cause"in l&&!("cause"in this)){const h=l.cause;this.cause=h,"stack"in h&&(this.stack=this.stack+`
CAUSE: `+h.stack)}}}return e};function pn(i){return typeof i=="object"}const dn=Ye("DisconnectedDevice"),En=Ye("DisconnectedDeviceDuringOperation"),Gt=Ye("TransportOpenUserCancelled"),gn=Ye("TransportRaceCondition");var jt;(function(i){i.Unknown="Unknown",i.LocationServicesDisabled="LocationServicesDisabled",i.LocationServicesUnauthorized="LocationServicesUnauthorized",i.BluetoothScanStartFailed="BluetoothScanStartFailed"})(jt||(jt={}));class fe extends Error{constructor(e,r){const s="TransportError";super(e||s),this.name=s,this.message=e,this.stack=new Error(e).stack,this.id=r}}const Re={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,CUSTOM_IMAGE_BOOTLOADER:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738};function mn(i){switch(i){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=i&&i<=28671)return"Internal error, please report"}class _e extends Error{constructor(e,{canBeMappedToChildError:r=!0}={}){const s=Object.keys(Re).find(c=>Re[c]===e)||"UNKNOWN_ERROR",a=mn(e)||s,l=e.toString(16),h=`Ledger device: ${a} (0x${l})`;if(super(h),this.name="TransportStatusError",this.statusCode=e,this.statusText=s,Object.setPrototypeOf(this,_e.prototype),r&&e===Re.LOCKED_DEVICE)return new Rt(h)}}class Rt extends _e{constructor(e){super(Re.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,Rt.prototype)}}let Or=0;const he=[],kt=(i,e,r)=>{const s={type:i,id:String(++Or),date:new Date};e&&(s.message=e),r&&(s.data=r),Br(s)},yn=({type:i,message:e,data:r,context:s})=>{const a={type:i,id:String(++Or),date:new Date};e&&(a.message=e),r&&(a.data=r),s&&(a.context=s),Br(a)};class Oe{constructor(e,r){this.type=e,this.context=r}trace(e,r){yn({type:this.type,message:e,data:r,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context=Object.assign(Object.assign({},this.context),e)}getType(){return this.type}setType(e){this.type=e}withType(e){return new Oe(e,this.context)}withContext(e){return new Oe(this.type,e)}withUpdatedContext(e){return new Oe(this.type,Object.assign(Object.assign({},this.context),e))}}const wn=i=>(he.push(i),()=>{const e=he.indexOf(i);e!==-1&&(he[e]=he[he.length-1],he.pop())});function Br(i){for(let e=0;e<he.length;e++)try{he[e](i)}catch(r){console.error(r)}}typeof window<"u"&&(window.__ledgerLogsListen=wn);var De=globalThis&&globalThis.__awaiter||function(i,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function c(g){try{E(s.next(g))}catch(y){h(y)}}function p(g){try{E(s.throw(g))}catch(y){h(y)}}function E(g){g.done?l(g.value):a(g.value).then(c,p)}E((s=s.apply(i,e||[])).next())})};const In="transport";class Lt{constructor({context:e,logType:r}={}){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new fn,this.send=(s,a,l,h,c=Buffer.alloc(0),p=[Re.OK],{abortTimeoutMs:E}={})=>De(this,void 0,void 0,function*(){const g=this.tracer.withUpdatedContext({function:"send"});if(c.length>=256)throw g.trace("data.length exceeded 256 bytes limit",{dataLength:c.length}),new fe("data.length exceed 256 bytes limit. Got: "+c.length,"DataLengthTooBig");g.trace("Starting an exchange",{abortTimeoutMs:E});const y=yield this.exchange(Buffer.concat([Buffer.from([s,a,l,h]),Buffer.from([c.length]),c]),{abortTimeoutMs:E});g.trace("Received response from exchange");const N=y.readUInt16BE(y.length-2);if(!p.some(I=>I===N))throw new _e(N);return y}),this._appAPIlock=null,this.tracer=new Oe(r??In,e)}exchange(e,{abortTimeoutMs:r}={}){throw new Error("exchange not implemented")}exchangeBulk(e,r){let s=!1;const a=()=>{s=!0};return(()=>De(this,void 0,void 0,function*(){if(!s)for(const h of e){const c=yield this.exchange(h);if(s)return;const p=c.readUInt16BE(c.length-2);if(p!==Re.OK)throw new _e(p);r.next(c)}}))().then(()=>!s&&r.complete(),h=>!s&&r.error(h)),{unsubscribe:a}}setScrambleKey(e){}close(){return Promise.resolve()}on(e,r){this._events.on(e,r)}off(e,r){this._events.removeListener(e,r)}emit(e,...r){this._events.emit(e,...r)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}static create(e=3e3,r){return new Promise((s,a)=>{let l=!1;const h=this.listen({next:p=>{l=!0,h&&h.unsubscribe(),c&&clearTimeout(c),this.open(p.descriptor,e).then(s,a)},error:p=>{c&&clearTimeout(c),a(p)},complete:()=>{c&&clearTimeout(c),l||a(new fe(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),c=r?setTimeout(()=>{h.unsubscribe(),a(new fe(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},r):null})}exchangeAtomicImpl(e){return De(this,void 0,void 0,function*(){const r=this.tracer.withUpdatedContext({function:"exchangeAtomicImpl",unresponsiveTimeout:this.unresponsiveTimeout});if(this.exchangeBusyPromise)throw r.trace("Atomic exchange is already busy"),new gn("An action was already pending on the Ledger device. Please deny or reconnect.");let s;const a=new Promise(c=>{s=c});this.exchangeBusyPromise=a;let l=!1;const h=setTimeout(()=>{r.trace('Timeout reached, emitting Transport event "unresponsive"',{unresponsiveTimeout:this.unresponsiveTimeout}),l=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const c=yield e();return l&&(r.trace("Device was unresponsive, emitting responsive"),this.emit("responsive")),c}finally{r.trace("Finalize, clearing busy guard"),clearTimeout(h),s&&s(),this.exchangeBusyPromise=null}})}decorateAppAPIMethods(e,r,s){for(const a of r)e[a]=this.decorateAppAPIMethod(a,e[a],e,s)}decorateAppAPIMethod(e,r,s,a){return(...l)=>De(this,void 0,void 0,function*(){const{_appAPIlock:h}=this;if(h)return Promise.reject(new fe("Ledger Device is busy (lock "+h+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(a),yield r.apply(s,l)}finally{this._appAPIlock=null}})}setTraceContext(e){this.tracer=this.tracer.withContext(e)}updateTraceContext(e){this.tracer.updateContext(e)}getTraceContext(){return this.tracer.getContext()}}Lt.ErrorMessage_ListenTimeout="No Ledger device found (timeout)";Lt.ErrorMessage_NoDeviceFound="No Ledger device found";const Vt=5;function xn(i){const e=Buffer.alloc(2);return e.writeUInt16BE(i,0),e}const vn={data:Buffer.alloc(0),dataLength:0,sequence:0},Rn=(i,e)=>({makeBlocks(r){let s=Buffer.concat([xn(r.length),r]);const a=e-5,l=Math.ceil(s.length/a);s=Buffer.concat([s,Buffer.alloc(l*a-s.length+1).fill(0)]);const h=[];for(let c=0;c<l;c++){const p=Buffer.alloc(5);p.writeUInt16BE(i,0),p.writeUInt8(Vt,2),p.writeUInt16BE(c,3);const E=s.slice(c*a,(c+1)*a);h.push(Buffer.concat([p,E]))}return h},reduceResponse(r,s){let{data:a,dataLength:l,sequence:h}=r||vn;if(s.readUInt16BE(0)!==i)throw new fe("Invalid channel","InvalidChannel");if(s.readUInt8(2)!==Vt)throw new fe("Invalid tag","InvalidTag");if(s.readUInt16BE(3)!==h)throw new fe("Invalid sequence","InvalidSequence");r||(l=s.readUInt16BE(5)),h++;const c=s.slice(r?5:7);return a=Buffer.concat([a,c]),a.length>l&&(a=a.slice(0,l)),{data:a,dataLength:l,sequence:h}},getReducedResult(r){if(r&&r.dataLength===r.data.length)return r.data}});var wt={exports:{}};const Ln="2.0.0",_r=256,An=Number.MAX_SAFE_INTEGER||9007199254740991,$n=16,Tn=_r-6,Sn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ze={MAX_LENGTH:_r,MAX_SAFE_COMPONENT_LENGTH:$n,MAX_SAFE_BUILD_LENGTH:Tn,MAX_SAFE_INTEGER:An,RELEASE_TYPES:Sn,SEMVER_SPEC_VERSION:Ln,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Nn=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...i)=>console.error("SEMVER",...i):()=>{};var Ze=Nn;(function(i,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:a}=ze,l=Ze;e=i.exports={};const h=e.re=[],c=e.safeRe=[],p=e.src=[],E=e.t={};let g=0;const y="[a-zA-Z0-9-]",N=[["\\s",1],["\\d",a],[y,s]],I=k=>{for(const[V,H]of N)k=k.split(`${V}*`).join(`${V}{0,${H}}`).split(`${V}+`).join(`${V}{1,${H}}`);return k},v=(k,V,H)=>{const _=I(V),Y=g++;l(k,Y,V),E[k]=Y,p[Y]=V,h[Y]=new RegExp(V,H?"g":void 0),c[Y]=new RegExp(_,H?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${y}*`),v("MAINVERSION",`(${p[E.NUMERICIDENTIFIER]})\\.(${p[E.NUMERICIDENTIFIER]})\\.(${p[E.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${p[E.NUMERICIDENTIFIERLOOSE]})\\.(${p[E.NUMERICIDENTIFIERLOOSE]})\\.(${p[E.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${p[E.NUMERICIDENTIFIER]}|${p[E.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${p[E.NUMERICIDENTIFIERLOOSE]}|${p[E.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${p[E.PRERELEASEIDENTIFIER]}(?:\\.${p[E.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${p[E.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[E.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${y}+`),v("BUILD",`(?:\\+(${p[E.BUILDIDENTIFIER]}(?:\\.${p[E.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${p[E.MAINVERSION]}${p[E.PRERELEASE]}?${p[E.BUILD]}?`),v("FULL",`^${p[E.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${p[E.MAINVERSIONLOOSE]}${p[E.PRERELEASELOOSE]}?${p[E.BUILD]}?`),v("LOOSE",`^${p[E.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${p[E.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${p[E.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${p[E.XRANGEIDENTIFIER]})(?:\\.(${p[E.XRANGEIDENTIFIER]})(?:\\.(${p[E.XRANGEIDENTIFIER]})(?:${p[E.PRERELEASE]})?${p[E.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${p[E.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[E.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[E.XRANGEIDENTIFIERLOOSE]})(?:${p[E.PRERELEASELOOSE]})?${p[E.BUILD]}?)?)?`),v("XRANGE",`^${p[E.GTLT]}\\s*${p[E.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${p[E.GTLT]}\\s*${p[E.XRANGEPLAINLOOSE]}$`),v("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),v("COERCE",`${p[E.COERCEPLAIN]}(?:$|[^\\d])`),v("COERCEFULL",p[E.COERCEPLAIN]+`(?:${p[E.PRERELEASE]})?(?:${p[E.BUILD]})?(?:$|[^\\d])`),v("COERCERTL",p[E.COERCE],!0),v("COERCERTLFULL",p[E.COERCEFULL],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${p[E.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",v("TILDE",`^${p[E.LONETILDE]}${p[E.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${p[E.LONETILDE]}${p[E.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${p[E.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",v("CARET",`^${p[E.LONECARET]}${p[E.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${p[E.LONECARET]}${p[E.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${p[E.GTLT]}\\s*(${p[E.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${p[E.GTLT]}\\s*(${p[E.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${p[E.GTLT]}\\s*(${p[E.LOOSEPLAIN]}|${p[E.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${p[E.XRANGEPLAIN]})\\s+-\\s+(${p[E.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${p[E.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[E.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(wt,wt.exports);var Ce=wt.exports;const On=Object.freeze({loose:!0}),Bn=Object.freeze({}),_n=i=>i?typeof i!="object"?On:i:Bn;var At=_n;const Xt=/^[0-9]+$/,Cr=(i,e)=>{const r=Xt.test(i),s=Xt.test(e);return r&&s&&(i=+i,e=+e),i===e?0:r&&!s?-1:s&&!r?1:i<e?-1:1},Cn=(i,e)=>Cr(e,i);var Ur={compareIdentifiers:Cr,rcompareIdentifiers:Cn};const Pe=Ze,{MAX_LENGTH:Ht,MAX_SAFE_INTEGER:Me}=ze,{safeRe:qt,t:Wt}=Ce,Un=At,{compareIdentifiers:Ie}=Ur;let bn=class re{constructor(e,r){if(r=Un(r),e instanceof re){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Ht)throw new TypeError(`version is longer than ${Ht} characters`);Pe("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const s=e.trim().match(r.loose?qt[Wt.LOOSE]:qt[Wt.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>Me||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Me||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Me||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const l=+a;if(l>=0&&l<Me)return l}return a}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Pe("SemVer.compare",this.version,this.options,e),!(e instanceof re)){if(typeof e=="string"&&e===this.version)return 0;e=new re(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof re||(e=new re(e,this.options)),Ie(this.major,e.major)||Ie(this.minor,e.minor)||Ie(this.patch,e.patch)}comparePre(e){if(e instanceof re||(e=new re(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const s=this.prerelease[r],a=e.prerelease[r];if(Pe("prerelease compare",r,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s===a)continue;return Ie(s,a)}while(++r)}compareBuild(e){e instanceof re||(e=new re(e,this.options));let r=0;do{const s=this.build[r],a=e.build[r];if(Pe("prerelease compare",r,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s===a)continue;return Ie(s,a)}while(++r)}inc(e,r,s){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,s),this.inc("pre",r,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,s),this.inc("pre",r,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(s)?1:0;if(!r&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let l=this.prerelease.length;for(;--l>=0;)typeof this.prerelease[l]=="number"&&(this.prerelease[l]++,l=-2);if(l===-1){if(r===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(r){let l=[r,a];s===!1&&(l=[r]),Ie(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=l):this.prerelease=l}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var K=bn;const Kt=K,Fn=(i,e,r=!1)=>{if(i instanceof Kt)return i;try{return new Kt(i,e)}catch(s){if(!r)return null;throw s}};var Ae=Fn;const Dn=Ae,Pn=(i,e)=>{const r=Dn(i,e);return r?r.version:null};var Mn=Pn;const Gn=Ae,jn=(i,e)=>{const r=Gn(i.trim().replace(/^[=v]+/,""),e);return r?r.version:null};var kn=jn;const Yt=K,Vn=(i,e,r,s,a)=>{typeof r=="string"&&(a=s,s=r,r=void 0);try{return new Yt(i instanceof Yt?i.version:i,r).inc(e,s,a).version}catch{return null}};var Xn=Vn;const zt=Ae,Hn=(i,e)=>{const r=zt(i,null,!0),s=zt(e,null,!0),a=r.compare(s);if(a===0)return null;const l=a>0,h=l?r:s,c=l?s:r,p=!!h.prerelease.length;if(!!c.prerelease.length&&!p)return!c.patch&&!c.minor?"major":h.patch?"patch":h.minor?"minor":"major";const g=p?"pre":"";return r.major!==s.major?g+"major":r.minor!==s.minor?g+"minor":r.patch!==s.patch?g+"patch":"prerelease"};var qn=Hn;const Wn=K,Kn=(i,e)=>new Wn(i,e).major;var Yn=Kn;const zn=K,Zn=(i,e)=>new zn(i,e).minor;var Jn=Zn;const Qn=K,ei=(i,e)=>new Qn(i,e).patch;var ti=ei;const ri=Ae,ni=(i,e)=>{const r=ri(i,e);return r&&r.prerelease.length?r.prerelease:null};var ii=ni;const Zt=K,si=(i,e,r)=>new Zt(i,r).compare(new Zt(e,r));var J=si;const oi=J,ai=(i,e,r)=>oi(e,i,r);var ci=ai;const ui=J,li=(i,e)=>ui(i,e,!0);var hi=li;const Jt=K,fi=(i,e,r)=>{const s=new Jt(i,r),a=new Jt(e,r);return s.compare(a)||s.compareBuild(a)};var $t=fi;const pi=$t,di=(i,e)=>i.sort((r,s)=>pi(r,s,e));var Ei=di;const gi=$t,mi=(i,e)=>i.sort((r,s)=>gi(s,r,e));var yi=mi;const wi=J,Ii=(i,e,r)=>wi(i,e,r)>0;var Je=Ii;const xi=J,vi=(i,e,r)=>xi(i,e,r)<0;var Tt=vi;const Ri=J,Li=(i,e,r)=>Ri(i,e,r)===0;var br=Li;const Ai=J,$i=(i,e,r)=>Ai(i,e,r)!==0;var Fr=$i;const Ti=J,Si=(i,e,r)=>Ti(i,e,r)>=0;var St=Si;const Ni=J,Oi=(i,e,r)=>Ni(i,e,r)<=0;var Nt=Oi;const Bi=br,_i=Fr,Ci=Je,Ui=St,bi=Tt,Fi=Nt,Di=(i,e,r,s)=>{switch(e){case"===":return typeof i=="object"&&(i=i.version),typeof r=="object"&&(r=r.version),i===r;case"!==":return typeof i=="object"&&(i=i.version),typeof r=="object"&&(r=r.version),i!==r;case"":case"=":case"==":return Bi(i,r,s);case"!=":return _i(i,r,s);case">":return Ci(i,r,s);case">=":return Ui(i,r,s);case"<":return bi(i,r,s);case"<=":return Fi(i,r,s);default:throw new TypeError(`Invalid operator: ${e}`)}};var Dr=Di;const Pi=K,Mi=Ae,{safeRe:Ge,t:je}=Ce,Gi=(i,e)=>{if(i instanceof Pi)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;e=e||{};let r=null;if(!e.rtl)r=i.match(e.includePrerelease?Ge[je.COERCEFULL]:Ge[je.COERCE]);else{const p=e.includePrerelease?Ge[je.COERCERTLFULL]:Ge[je.COERCERTL];let E;for(;(E=p.exec(i))&&(!r||r.index+r[0].length!==i.length);)(!r||E.index+E[0].length!==r.index+r[0].length)&&(r=E),p.lastIndex=E.index+E[1].length+E[2].length;p.lastIndex=-1}if(r===null)return null;const s=r[2],a=r[3]||"0",l=r[4]||"0",h=e.includePrerelease&&r[5]?`-${r[5]}`:"",c=e.includePrerelease&&r[6]?`+${r[6]}`:"";return Mi(`${s}.${a}.${l}${h}${c}`,e)};var ji=Gi,ht,Qt;function ki(){return Qt||(Qt=1,ht=function(i){i.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),ht}var Vi=C;C.Node=ge;C.create=C;function C(i){var e=this;if(e instanceof C||(e=new C),e.tail=null,e.head=null,e.length=0,i&&typeof i.forEach=="function")i.forEach(function(a){e.push(a)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)e.push(arguments[r]);return e}C.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var e=i.next,r=i.prev;return e&&(e.prev=r),r&&(r.next=e),i===this.head&&(this.head=e),i===this.tail&&(this.tail=r),i.list.length--,i.next=null,i.prev=null,i.list=null,e};C.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var e=this.head;i.list=this,i.next=e,e&&(e.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}};C.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var e=this.tail;i.list=this,i.prev=e,e&&(e.next=i),this.tail=i,this.head||(this.head=i),this.length++}};C.prototype.push=function(){for(var i=0,e=arguments.length;i<e;i++)Hi(this,arguments[i]);return this.length};C.prototype.unshift=function(){for(var i=0,e=arguments.length;i<e;i++)qi(this,arguments[i]);return this.length};C.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}};C.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}};C.prototype.forEach=function(i,e){e=e||this;for(var r=this.head,s=0;r!==null;s++)i.call(e,r.value,s,this),r=r.next};C.prototype.forEachReverse=function(i,e){e=e||this;for(var r=this.tail,s=this.length-1;r!==null;s--)i.call(e,r.value,s,this),r=r.prev};C.prototype.get=function(i){for(var e=0,r=this.head;r!==null&&e<i;e++)r=r.next;if(e===i&&r!==null)return r.value};C.prototype.getReverse=function(i){for(var e=0,r=this.tail;r!==null&&e<i;e++)r=r.prev;if(e===i&&r!==null)return r.value};C.prototype.map=function(i,e){e=e||this;for(var r=new C,s=this.head;s!==null;)r.push(i.call(e,s.value,this)),s=s.next;return r};C.prototype.mapReverse=function(i,e){e=e||this;for(var r=new C,s=this.tail;s!==null;)r.push(i.call(e,s.value,this)),s=s.prev;return r};C.prototype.reduce=function(i,e){var r,s=this.head;if(arguments.length>1)r=e;else if(this.head)s=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=0;s!==null;a++)r=i(r,s.value,a),s=s.next;return r};C.prototype.reduceReverse=function(i,e){var r,s=this.tail;if(arguments.length>1)r=e;else if(this.tail)s=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=this.length-1;s!==null;a--)r=i(r,s.value,a),s=s.prev;return r};C.prototype.toArray=function(){for(var i=new Array(this.length),e=0,r=this.head;r!==null;e++)i[e]=r.value,r=r.next;return i};C.prototype.toArrayReverse=function(){for(var i=new Array(this.length),e=0,r=this.tail;r!==null;e++)i[e]=r.value,r=r.prev;return i};C.prototype.slice=function(i,e){e=e||this.length,e<0&&(e+=this.length),i=i||0,i<0&&(i+=this.length);var r=new C;if(e<i||e<0)return r;i<0&&(i=0),e>this.length&&(e=this.length);for(var s=0,a=this.head;a!==null&&s<i;s++)a=a.next;for(;a!==null&&s<e;s++,a=a.next)r.push(a.value);return r};C.prototype.sliceReverse=function(i,e){e=e||this.length,e<0&&(e+=this.length),i=i||0,i<0&&(i+=this.length);var r=new C;if(e<i||e<0)return r;i<0&&(i=0),e>this.length&&(e=this.length);for(var s=this.length,a=this.tail;a!==null&&s>e;s--)a=a.prev;for(;a!==null&&s>i;s--,a=a.prev)r.push(a.value);return r};C.prototype.splice=function(i,e,...r){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var s=0,a=this.head;a!==null&&s<i;s++)a=a.next;for(var l=[],s=0;a&&s<e;s++)l.push(a.value),a=this.removeNode(a);a===null&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(var s=0;s<r.length;s++)a=Xi(this,a,r[s]);return l};C.prototype.reverse=function(){for(var i=this.head,e=this.tail,r=i;r!==null;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=e,this.tail=i,this};function Xi(i,e,r){var s=e===i.head?new ge(r,null,e,i):new ge(r,e,e.next,i);return s.next===null&&(i.tail=s),s.prev===null&&(i.head=s),i.length++,s}function Hi(i,e){i.tail=new ge(e,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function qi(i,e){i.head=new ge(e,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function ge(i,e,r,s){if(!(this instanceof ge))return new ge(i,e,r,s);this.list=s,this.value=i,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{ki()(C)}catch{}const Wi=Vi,de=Symbol("max"),oe=Symbol("length"),xe=Symbol("lengthCalculator"),Be=Symbol("allowStale"),Ee=Symbol("maxAge"),se=Symbol("dispose"),er=Symbol("noDisposeOnSet"),X=Symbol("lruList"),Z=Symbol("cache"),Pr=Symbol("updateAgeOnGet"),ft=()=>1;class Ki{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[de]=e.max||1/0;const r=e.length||ft;if(this[xe]=typeof r!="function"?ft:r,this[Be]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ee]=e.maxAge||0,this[se]=e.dispose,this[er]=e.noDisposeOnSet||!1,this[Pr]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[de]=e||1/0,Te(this)}get max(){return this[de]}set allowStale(e){this[Be]=!!e}get allowStale(){return this[Be]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Ee]=e,Te(this)}get maxAge(){return this[Ee]}set lengthCalculator(e){typeof e!="function"&&(e=ft),e!==this[xe]&&(this[xe]=e,this[oe]=0,this[X].forEach(r=>{r.length=this[xe](r.value,r.key),this[oe]+=r.length})),Te(this)}get lengthCalculator(){return this[xe]}get length(){return this[oe]}get itemCount(){return this[X].length}rforEach(e,r){r=r||this;for(let s=this[X].tail;s!==null;){const a=s.prev;tr(this,e,s,r),s=a}}forEach(e,r){r=r||this;for(let s=this[X].head;s!==null;){const a=s.next;tr(this,e,s,r),s=a}}keys(){return this[X].toArray().map(e=>e.key)}values(){return this[X].toArray().map(e=>e.value)}reset(){this[se]&&this[X]&&this[X].length&&this[X].forEach(e=>this[se](e.key,e.value)),this[Z]=new Map,this[X]=new Wi,this[oe]=0}dump(){return this[X].map(e=>He(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[X]}set(e,r,s){if(s=s||this[Ee],s&&typeof s!="number")throw new TypeError("maxAge must be a number");const a=s?Date.now():0,l=this[xe](r,e);if(this[Z].has(e)){if(l>this[de])return Le(this,this[Z].get(e)),!1;const p=this[Z].get(e).value;return this[se]&&(this[er]||this[se](e,p.value)),p.now=a,p.maxAge=s,p.value=r,this[oe]+=l-p.length,p.length=l,this.get(e),Te(this),!0}const h=new Yi(e,r,l,a,s);return h.length>this[de]?(this[se]&&this[se](e,r),!1):(this[oe]+=h.length,this[X].unshift(h),this[Z].set(e,this[X].head),Te(this),!0)}has(e){if(!this[Z].has(e))return!1;const r=this[Z].get(e).value;return!He(this,r)}get(e){return pt(this,e,!0)}peek(e){return pt(this,e,!1)}pop(){const e=this[X].tail;return e?(Le(this,e),e.value):null}del(e){Le(this,this[Z].get(e))}load(e){this.reset();const r=Date.now();for(let s=e.length-1;s>=0;s--){const a=e[s],l=a.e||0;if(l===0)this.set(a.k,a.v);else{const h=l-r;h>0&&this.set(a.k,a.v,h)}}}prune(){this[Z].forEach((e,r)=>pt(this,r,!1))}}const pt=(i,e,r)=>{const s=i[Z].get(e);if(s){const a=s.value;if(He(i,a)){if(Le(i,s),!i[Be])return}else r&&(i[Pr]&&(s.value.now=Date.now()),i[X].unshiftNode(s));return a.value}},He=(i,e)=>{if(!e||!e.maxAge&&!i[Ee])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:i[Ee]&&r>i[Ee]},Te=i=>{if(i[oe]>i[de])for(let e=i[X].tail;i[oe]>i[de]&&e!==null;){const r=e.prev;Le(i,e),e=r}},Le=(i,e)=>{if(e){const r=e.value;i[se]&&i[se](r.key,r.value),i[oe]-=r.length,i[Z].delete(r.key),i[X].removeNode(e)}};class Yi{constructor(e,r,s,a,l){this.key=e,this.value=r,this.length=s,this.now=a,this.maxAge=l||0}}const tr=(i,e,r,s)=>{let a=r.value;He(i,a)&&(Le(i,r),i[Be]||(a=void 0)),a&&e.call(s,a.value,a.key,i)};var zi=Ki,dt,rr;function Q(){if(rr)return dt;rr=1;class i{constructor(w,T){if(T=s(T),w instanceof i)return w.loose===!!T.loose&&w.includePrerelease===!!T.includePrerelease?w:new i(w.raw,T);if(w instanceof a)return this.raw=w.value,this.set=[[w]],this.format(),this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=w.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(A=>this.parseRange(A.trim())).filter(A=>A.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const A=this.set[0];if(this.set=this.set.filter($=>!v($[0])),this.set.length===0)this.set=[A];else if(this.set.length>1){for(const $ of this.set)if($.length===1&&k($[0])){this.set=[$];break}}}this.format()}format(){return this.range=this.set.map(w=>w.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(w){const A=((this.options.includePrerelease&&N)|(this.options.loose&&I))+":"+w,$=r.get(A);if($)return $;const R=this.options.loose,S=R?c[p.HYPHENRANGELOOSE]:c[p.HYPHENRANGE];w=w.replace(S,it(this.options.includePrerelease)),l("hyphen replace",w),w=w.replace(c[p.COMPARATORTRIM],E),l("comparator trim",w),w=w.replace(c[p.TILDETRIM],g),l("tilde trim",w),w=w.replace(c[p.CARETTRIM],y),l("caret trim",w);let U=w.split(" ").map(P=>H(P,this.options)).join(" ").split(/\s+/).map(P=>nt(P,this.options));R&&(U=U.filter(P=>(l("loose invalid filter",P,this.options),!!P.match(c[p.COMPARATORLOOSE])))),l("range list",U);const L=new Map,O=U.map(P=>new a(P,this.options));for(const P of O){if(v(P))return[P];L.set(P.value,P)}L.size>1&&L.has("")&&L.delete("");const W=[...L.values()];return r.set(A,W),W}intersects(w,T){if(!(w instanceof i))throw new TypeError("a Range is required");return this.set.some(A=>V(A,T)&&w.set.some($=>V($,T)&&A.every(R=>$.every(S=>R.intersects(S,T)))))}test(w){if(!w)return!1;if(typeof w=="string")try{w=new h(w,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(st(this.set[T],w,this.options))return!0;return!1}}dt=i;const e=zi,r=new e({max:1e3}),s=At,a=Qe(),l=Ze,h=K,{safeRe:c,t:p,comparatorTrimReplace:E,tildeTrimReplace:g,caretTrimReplace:y}=Ce,{FLAG_INCLUDE_PRERELEASE:N,FLAG_LOOSE:I}=ze,v=x=>x.value==="<0.0.0-0",k=x=>x.value==="",V=(x,w)=>{let T=!0;const A=x.slice();let $=A.pop();for(;T&&A.length;)T=A.every(R=>$.intersects(R,w)),$=A.pop();return T},H=(x,w)=>(l("comp",x,w),x=ie(x,w),l("caret",x),x=Y(x,w),l("tildes",x),x=be(x,w),l("xrange",x),x=rt(x,w),l("stars",x),x),_=x=>!x||x.toLowerCase()==="x"||x==="*",Y=(x,w)=>x.trim().split(/\s+/).map(T=>ce(T,w)).join(" "),ce=(x,w)=>{const T=w.loose?c[p.TILDELOOSE]:c[p.TILDE];return x.replace(T,(A,$,R,S,U)=>{l("tilde",x,A,$,R,S,U);let L;return _($)?L="":_(R)?L=`>=${$}.0.0 <${+$+1}.0.0-0`:_(S)?L=`>=${$}.${R}.0 <${$}.${+R+1}.0-0`:U?(l("replaceTilde pr",U),L=`>=${$}.${R}.${S}-${U} <${$}.${+R+1}.0-0`):L=`>=${$}.${R}.${S} <${$}.${+R+1}.0-0`,l("tilde return",L),L})},ie=(x,w)=>x.trim().split(/\s+/).map(T=>Ue(T,w)).join(" "),Ue=(x,w)=>{l("caret",x,w);const T=w.loose?c[p.CARETLOOSE]:c[p.CARET],A=w.includePrerelease?"-0":"";return x.replace(T,($,R,S,U,L)=>{l("caret",x,$,R,S,U,L);let O;return _(R)?O="":_(S)?O=`>=${R}.0.0${A} <${+R+1}.0.0-0`:_(U)?R==="0"?O=`>=${R}.${S}.0${A} <${R}.${+S+1}.0-0`:O=`>=${R}.${S}.0${A} <${+R+1}.0.0-0`:L?(l("replaceCaret pr",L),R==="0"?S==="0"?O=`>=${R}.${S}.${U}-${L} <${R}.${S}.${+U+1}-0`:O=`>=${R}.${S}.${U}-${L} <${R}.${+S+1}.0-0`:O=`>=${R}.${S}.${U}-${L} <${+R+1}.0.0-0`):(l("no pr"),R==="0"?S==="0"?O=`>=${R}.${S}.${U}${A} <${R}.${S}.${+U+1}-0`:O=`>=${R}.${S}.${U}${A} <${R}.${+S+1}.0-0`:O=`>=${R}.${S}.${U} <${+R+1}.0.0-0`),l("caret return",O),O})},be=(x,w)=>(l("replaceXRanges",x,w),x.split(/\s+/).map(T=>tt(T,w)).join(" ")),tt=(x,w)=>{x=x.trim();const T=w.loose?c[p.XRANGELOOSE]:c[p.XRANGE];return x.replace(T,(A,$,R,S,U,L)=>{l("xRange",x,A,$,R,S,U,L);const O=_(R),W=O||_(S),P=W||_(U),ue=P;return $==="="&&ue&&($=""),L=w.includePrerelease?"-0":"",O?$===">"||$==="<"?A="<0.0.0-0":A="*":$&&ue?(W&&(S=0),U=0,$===">"?($=">=",W?(R=+R+1,S=0,U=0):(S=+S+1,U=0)):$==="<="&&($="<",W?R=+R+1:S=+S+1),$==="<"&&(L="-0"),A=`${$+R}.${S}.${U}${L}`):W?A=`>=${R}.0.0${L} <${+R+1}.0.0-0`:P&&(A=`>=${R}.${S}.0${L} <${R}.${+S+1}.0-0`),l("xRange return",A),A})},rt=(x,w)=>(l("replaceStars",x,w),x.trim().replace(c[p.STAR],"")),nt=(x,w)=>(l("replaceGTE0",x,w),x.trim().replace(c[w.includePrerelease?p.GTE0PRE:p.GTE0],"")),it=x=>(w,T,A,$,R,S,U,L,O,W,P,ue,ot)=>(_(A)?T="":_($)?T=`>=${A}.0.0${x?"-0":""}`:_(R)?T=`>=${A}.${$}.0${x?"-0":""}`:S?T=`>=${T}`:T=`>=${T}${x?"-0":""}`,_(O)?L="":_(W)?L=`<${+O+1}.0.0-0`:_(P)?L=`<${O}.${+W+1}.0-0`:ue?L=`<=${O}.${W}.${P}-${ue}`:x?L=`<${O}.${W}.${+P+1}-0`:L=`<=${L}`,`${T} ${L}`.trim()),st=(x,w,T)=>{for(let A=0;A<x.length;A++)if(!x[A].test(w))return!1;if(w.prerelease.length&&!T.includePrerelease){for(let A=0;A<x.length;A++)if(l(x[A].semver),x[A].semver!==a.ANY&&x[A].semver.prerelease.length>0){const $=x[A].semver;if($.major===w.major&&$.minor===w.minor&&$.patch===w.patch)return!0}return!1}return!0};return dt}var Et,nr;function Qe(){if(nr)return Et;nr=1;const i=Symbol("SemVer ANY");class e{static get ANY(){return i}constructor(g,y){if(y=r(y),g instanceof e){if(g.loose===!!y.loose)return g;g=g.value}g=g.trim().split(/\s+/).join(" "),h("comparator",g,y),this.options=y,this.loose=!!y.loose,this.parse(g),this.semver===i?this.value="":this.value=this.operator+this.semver.version,h("comp",this)}parse(g){const y=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],N=g.match(y);if(!N)throw new TypeError(`Invalid comparator: ${g}`);this.operator=N[1]!==void 0?N[1]:"",this.operator==="="&&(this.operator=""),N[2]?this.semver=new c(N[2],this.options.loose):this.semver=i}toString(){return this.value}test(g){if(h("Comparator.test",g,this.options.loose),this.semver===i||g===i)return!0;if(typeof g=="string")try{g=new c(g,this.options)}catch{return!1}return l(g,this.operator,this.semver,this.options)}intersects(g,y){if(!(g instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new p(g.value,y).test(this.value):g.operator===""?g.value===""?!0:new p(this.value,y).test(g.semver):(y=r(y),y.includePrerelease&&(this.value==="<0.0.0-0"||g.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||g.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&g.operator.startsWith(">")||this.operator.startsWith("<")&&g.operator.startsWith("<")||this.semver.version===g.semver.version&&this.operator.includes("=")&&g.operator.includes("=")||l(this.semver,"<",g.semver,y)&&this.operator.startsWith(">")&&g.operator.startsWith("<")||l(this.semver,">",g.semver,y)&&this.operator.startsWith("<")&&g.operator.startsWith(">")))}}Et=e;const r=At,{safeRe:s,t:a}=Ce,l=Dr,h=Ze,c=K,p=Q();return Et}const Zi=Q(),Ji=(i,e,r)=>{try{e=new Zi(e,r)}catch{return!1}return e.test(i)};var et=Ji;const Qi=Q(),es=(i,e)=>new Qi(i,e).set.map(r=>r.map(s=>s.value).join(" ").trim().split(" "));var ts=es;const rs=K,ns=Q(),is=(i,e,r)=>{let s=null,a=null,l=null;try{l=new ns(e,r)}catch{return null}return i.forEach(h=>{l.test(h)&&(!s||a.compare(h)===-1)&&(s=h,a=new rs(s,r))}),s};var ss=is;const os=K,as=Q(),cs=(i,e,r)=>{let s=null,a=null,l=null;try{l=new as(e,r)}catch{return null}return i.forEach(h=>{l.test(h)&&(!s||a.compare(h)===1)&&(s=h,a=new os(s,r))}),s};var us=cs;const gt=K,ls=Q(),ir=Je,hs=(i,e)=>{i=new ls(i,e);let r=new gt("0.0.0");if(i.test(r)||(r=new gt("0.0.0-0"),i.test(r)))return r;r=null;for(let s=0;s<i.set.length;++s){const a=i.set[s];let l=null;a.forEach(h=>{const c=new gt(h.semver.version);switch(h.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!l||ir(c,l))&&(l=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${h.operator}`)}}),l&&(!r||ir(r,l))&&(r=l)}return r&&i.test(r)?r:null};var fs=hs;const ps=Q(),ds=(i,e)=>{try{return new ps(i,e).range||"*"}catch{return null}};var Es=ds;const gs=K,Mr=Qe(),{ANY:ms}=Mr,ys=Q(),ws=et,sr=Je,or=Tt,Is=Nt,xs=St,vs=(i,e,r,s)=>{i=new gs(i,s),e=new ys(e,s);let a,l,h,c,p;switch(r){case">":a=sr,l=Is,h=or,c=">",p=">=";break;case"<":a=or,l=xs,h=sr,c="<",p="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ws(i,e,s))return!1;for(let E=0;E<e.set.length;++E){const g=e.set[E];let y=null,N=null;if(g.forEach(I=>{I.semver===ms&&(I=new Mr(">=0.0.0")),y=y||I,N=N||I,a(I.semver,y.semver,s)?y=I:h(I.semver,N.semver,s)&&(N=I)}),y.operator===c||y.operator===p||(!N.operator||N.operator===c)&&l(i,N.semver))return!1;if(N.operator===p&&h(i,N.semver))return!1}return!0};var Ot=vs;const Rs=Ot,Ls=(i,e,r)=>Rs(i,e,">",r);var As=Ls;const $s=Ot,Ts=(i,e,r)=>$s(i,e,"<",r);var Ss=Ts;const ar=Q(),Ns=(i,e,r)=>(i=new ar(i,r),e=new ar(e,r),i.intersects(e,r));var Os=Ns;const Bs=et,_s=J;var Cs=(i,e,r)=>{const s=[];let a=null,l=null;const h=i.sort((g,y)=>_s(g,y,r));for(const g of h)Bs(g,e,r)?(l=g,a||(a=g)):(l&&s.push([a,l]),l=null,a=null);a&&s.push([a,null]);const c=[];for(const[g,y]of s)g===y?c.push(g):!y&&g===h[0]?c.push("*"):y?g===h[0]?c.push(`<=${y}`):c.push(`${g} - ${y}`):c.push(`>=${g}`);const p=c.join(" || "),E=typeof e.raw=="string"?e.raw:String(e);return p.length<E.length?p:e};const cr=Q(),Bt=Qe(),{ANY:mt}=Bt,Se=et,_t=J,Us=(i,e,r={})=>{if(i===e)return!0;i=new cr(i,r),e=new cr(e,r);let s=!1;e:for(const a of i.set){for(const l of e.set){const h=Fs(a,l,r);if(s=s||h!==null,h)continue e}if(s)return!1}return!0},bs=[new Bt(">=0.0.0-0")],ur=[new Bt(">=0.0.0")],Fs=(i,e,r)=>{if(i===e)return!0;if(i.length===1&&i[0].semver===mt){if(e.length===1&&e[0].semver===mt)return!0;r.includePrerelease?i=bs:i=ur}if(e.length===1&&e[0].semver===mt){if(r.includePrerelease)return!0;e=ur}const s=new Set;let a,l;for(const I of i)I.operator===">"||I.operator===">="?a=lr(a,I,r):I.operator==="<"||I.operator==="<="?l=hr(l,I,r):s.add(I.semver);if(s.size>1)return null;let h;if(a&&l){if(h=_t(a.semver,l.semver,r),h>0)return null;if(h===0&&(a.operator!==">="||l.operator!=="<="))return null}for(const I of s){if(a&&!Se(I,String(a),r)||l&&!Se(I,String(l),r))return null;for(const v of e)if(!Se(I,String(v),r))return!1;return!0}let c,p,E,g,y=l&&!r.includePrerelease&&l.semver.prerelease.length?l.semver:!1,N=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1;y&&y.prerelease.length===1&&l.operator==="<"&&y.prerelease[0]===0&&(y=!1);for(const I of e){if(g=g||I.operator===">"||I.operator===">=",E=E||I.operator==="<"||I.operator==="<=",a){if(N&&I.semver.prerelease&&I.semver.prerelease.length&&I.semver.major===N.major&&I.semver.minor===N.minor&&I.semver.patch===N.patch&&(N=!1),I.operator===">"||I.operator===">="){if(c=lr(a,I,r),c===I&&c!==a)return!1}else if(a.operator===">="&&!Se(a.semver,String(I),r))return!1}if(l){if(y&&I.semver.prerelease&&I.semver.prerelease.length&&I.semver.major===y.major&&I.semver.minor===y.minor&&I.semver.patch===y.patch&&(y=!1),I.operator==="<"||I.operator==="<="){if(p=hr(l,I,r),p===I&&p!==l)return!1}else if(l.operator==="<="&&!Se(l.semver,String(I),r))return!1}if(!I.operator&&(l||a)&&h!==0)return!1}return!(a&&E&&!l&&h!==0||l&&g&&!a&&h!==0||N||y)},lr=(i,e,r)=>{if(!i)return e;const s=_t(i.semver,e.semver,r);return s>0?i:s<0||e.operator===">"&&i.operator===">="?e:i},hr=(i,e,r)=>{if(!i)return e;const s=_t(i.semver,e.semver,r);return s<0?i:s>0||e.operator==="<"&&i.operator==="<="?e:i};var Ds=Us;const yt=Ce,fr=ze,Ps=K,pr=Ur,Ms=Ae,Gs=Mn,js=kn,ks=Xn,Vs=qn,Xs=Yn,Hs=Jn,qs=ti,Ws=ii,Ks=J,Ys=ci,zs=hi,Zs=$t,Js=Ei,Qs=yi,eo=Je,to=Tt,ro=br,no=Fr,io=St,so=Nt,oo=Dr,ao=ji,co=Qe(),uo=Q(),lo=et,ho=ts,fo=ss,po=us,Eo=fs,go=Es,mo=Ot,yo=As,wo=Ss,Io=Os,xo=Cs,vo=Ds;var Ro={parse:Ms,valid:Gs,clean:js,inc:ks,diff:Vs,major:Xs,minor:Hs,patch:qs,prerelease:Ws,compare:Ks,rcompare:Ys,compareLoose:zs,compareBuild:Zs,sort:Js,rsort:Qs,gt:eo,lt:to,eq:ro,neq:no,gte:io,lte:so,cmp:oo,coerce:ao,Comparator:co,Range:uo,satisfies:lo,toComparators:ho,maxSatisfying:fo,minSatisfying:po,minVersion:Eo,validRange:go,outside:mo,gtr:yo,ltr:wo,intersects:Io,simplifyRange:xo,subset:vo,SemVer:Ps,re:yt.re,src:yt.src,tokens:yt.t,SEMVER_SPEC_VERSION:fr.SEMVER_SPEC_VERSION,RELEASE_TYPES:fr.RELEASE_TYPES,compareIdentifiers:pr.compareIdentifiers,rcompareIdentifiers:pr.rcompareIdentifiers};const dr=Ir(Ro);var q;(function(i){i.blue="blue",i.nanoS="nanoS",i.nanoSP="nanoSP",i.nanoX="nanoX",i.stax="stax"})(q||(q={}));const It={[q.blue]:{id:q.blue,productName:"LedgerBlue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:i=>4*1024},[q.nanoS]:{id:q.nanoS,productName:"LedgerNanoS",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:i=>{var e;return dr.lt((e=dr.coerce(i))!==null&&e!==void 0?e:"","2.0.0")?4*1024:2*1024}},[q.nanoSP]:{id:q.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1533*1024,masks:[856686592],getBlockSize:i=>32},[q.nanoX]:{id:q.nanoX,productName:"LedgerNanoX",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:i=>4*1024,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[q.stax]:{id:q.stax,productName:"LedgerStax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1533*1024,masks:[857735168],getBlockSize:i=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]}};q.blue,q.nanoS,q.nanoSP,q.nanoX,q.stax;const Er=Object.values(It),Gr=11415,jr=i=>{const e=Er.find(a=>a.legacyUsbProductId===i);if(e)return e;const r=i>>8;return Er.find(a=>a.productIdMM===r)},Lo=[],gr={};for(const i in It){const e=It[i],{bluetoothSpec:r}=e;if(r)for(let s=0;s<r.length;s++){const a=r[s];Lo.push(a.serviceUuid),gr[a.serviceUuid]=gr[a.serviceUuid.replace(/-/g,"")]=Object.assign({deviceModel:e},a)}}var ae=globalThis&&globalThis.__awaiter||function(i,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function c(g){try{E(s.next(g))}catch(y){h(y)}}function p(g){try{E(s.throw(g))}catch(y){h(y)}}function E(g){g.done?l(g.value):a(g.value).then(c,p)}E((s=s.apply(i,e||[])).next())})};const Ao=[{vendorId:Gr}],$o=()=>Promise.resolve(!!(window.navigator&&window.navigator.hid)),qe=()=>{const{hid:i}=navigator;if(!i)throw new fe("navigator.hid is not supported","HIDNotSupported");return i};function kr(){return ae(this,void 0,void 0,function*(){const i=yield qe().requestDevice({filters:Ao});return Array.isArray(i)?i:[i]})}function Ct(){return ae(this,void 0,void 0,function*(){return(yield qe().getDevices()).filter(e=>e.vendorId===Gr)})}function To(){return ae(this,void 0,void 0,function*(){const i=yield Ct();return i.length>0?i[0]:(yield kr())[0]})}class pe extends Lt{constructor(e){super(),this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.inputs=[],this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise(r=>{this.inputCallback=r}),this.onInputReport=r=>{const s=Buffer.from(r.data.buffer);this.inputCallback?(this.inputCallback(s),this.inputCallback=null):this.inputs.push(s)},this._disconnectEmitted=!1,this._emitDisconnect=r=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",r))},this.exchange=r=>ae(this,void 0,void 0,function*(){return yield this.exchangeAtomicImpl(()=>ae(this,void 0,void 0,function*(){const{channel:a,packetSize:l}=this;kt("apdu","=> "+r.toString("hex"));const h=Rn(a,l),c=h.makeBlocks(r);for(let g=0;g<c.length;g++)yield this.device.sendReport(0,c[g]);let p,E;for(;!(p=h.getReducedResult(E));){const g=yield this.read();E=h.reduceResponse(E,g)}return kt("apdu","<= "+p.toString("hex")),p})).catch(a=>{throw a&&a.message&&a.message.includes("write")?(this._emitDisconnect(a),new En(a.message)):a})}),this.device=e,this.deviceModel=typeof e.productId=="number"?jr(e.productId):void 0,e.addEventListener("inputreport",this.onInputReport)}static request(){return ae(this,void 0,void 0,function*(){const[e]=yield kr();return pe.open(e)})}static openConnected(){return ae(this,void 0,void 0,function*(){const e=yield Ct();return e.length===0?null:pe.open(e[0])})}static open(e){return ae(this,void 0,void 0,function*(){yield e.open();const r=new pe(e),s=a=>{e===a.device&&(qe().removeEventListener("disconnect",s),r._emitDisconnect(new dn))};return qe().addEventListener("disconnect",s),r})}close(){return ae(this,void 0,void 0,function*(){yield this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),yield this.device.close()})}setScrambleKey(){}}pe.isSupported=$o;pe.list=Ct;pe.listen=i=>{let e=!1;To().then(s=>{if(!s)i.error(new Gt("Access denied to use Ledger device"));else if(!e){const a=typeof s.productId=="number"?jr(s.productId):void 0;i.next({type:"add",descriptor:s,deviceModel:a}),i.complete()}},s=>{i.error(new Gt(s.message))});function r(){e=!0}return{unsubscribe:r}};const Ne=224,So=1,No=2,Oo=3,Bo=4,_o=5,te=36864,ke=27013,mr=27750,Ve=27904,Co=1,Uo=2,bo=4,yr=8,wr=255;class Fo{constructor(e,r="l0v"){this.transport=void 0,this.transport=e,e.decorateAppAPIMethods(this,["getConfiguration","getPublicKey","getAddress","signMessage","signTransaction"],r)}getConfiguration(){return this.transport.send(Ne,So,0,0).then(e=>{if(M.Buffer.from(e.slice(e.length-2)).readUInt16BE(0)===te)return{configuration:e.slice()};throw new Error("Failed to get configuration")})}getPublicKey({account:e},r=!1){const s=M.Buffer.alloc(4);return s.writeUInt32BE(e),this.transport.send(Ne,No,r?1:0,0,s,[te]).then(a=>{if(M.Buffer.from(a.slice(a.length-2)).readUInt16BE(0)===te)return{publicKey:a.slice(1,33)};throw new Error("Failed to get public key")})}getAddress({account:e,contract:r}){const s=M.Buffer.alloc(5);return s.writeUInt32BE(e,0),s.writeUint8(r,4),this.transport.send(Ne,Bo,1,0,s,[te]).then(a=>{if(M.Buffer.from(a.slice(a.length-2)).readUInt16BE(0)===te)return{address:a.slice(1,33)};throw new Error("Failed to get address")})}signMessage({account:e,message:r,chainId:s}){let a=0;const l=[],h=M.Buffer.alloc(4);if(h.writeUInt32BE(e,0),typeof s=="number"){const E=M.Buffer.alloc(4);E.writeUInt32BE(s,0),a|=yr,l.push(E)}const c=[h,M.Buffer.alloc(1,a),...l,r],p=M.Buffer.concat(c);return this.transport.send(Ne,Oo,1,0,p,[te,ke,mr,Ve]).then(E=>{const g=M.Buffer.from(E.slice(E.length-2)).readUInt16BE(0);if(g===te)return{signature:E.slice(1,E.length-2)};throw g===ke?new Error("Transaction approval request was rejected"):g===Ve?new Error("Message signing is not supported"):new Error("Message signing not allowed. Have you enabled it in the app settings?")})}async signTransaction({account:e,originalWallet:r,wallet:s,message:a,chainId:l,context:h}){let c=0;const p=[],E=M.Buffer.alloc(5);E.writeUInt32BE(e,0),E.writeUint8(r,4);const g=M.Buffer.alloc(1);g.writeUInt8(h.decimals,0);let y=h.asset;h.asset.includes("-LP-")?y="LP":h.asset.length>8&&(y=h.asset.substring(0,6)+"..");const N=M.Buffer.from(y,"utf-8");if(typeof s=="number"&&s!==r&&(c|=Co,p.push(M.Buffer.alloc(1,s))),typeof h.workchainId=="number"&&(c|=Uo,p.push(M.Buffer.alloc(1,h.workchainId))),typeof h.address=="string"){if(h.address.length!==64)throw new Error("Invalid address format");c|=bo,p.push(M.Buffer.from(h.address,"hex"))}if(typeof l=="number"){const _=M.Buffer.alloc(4);_.writeUInt32BE(l,0),c|=yr,p.push(_)}const I=[E,g,M.Buffer.alloc(1,N.length),N,M.Buffer.alloc(1,c),...p,a.subarray(4)],v=M.Buffer.concat(I),k=[];for(let _=0;_<v.length;_+=wr)k.push(v.slice(_,Math.min(v.length,_+wr)));let V,H;for(let _=0;_<k.length;_++){const Y=k[_];let ce=0;if(k.length!==1&&(_===0?ce=2:_===k.length-1?ce=1:ce=3),V=await this.transport.send(Ne,_o,1,ce,Y,[te,ke,mr,Ve]),H=M.Buffer.from(V.slice(V.length-2)).readUInt16BE(0),H!==te)break}if(H===te)return{signature:V.slice(1,V.length-2)};throw H===ke?new Error("Transaction approval request was rejected"):H===Ve?new Error("Message signing is not supported"):new Error("Message signing not allowed. Have you enabled it in the app settings?")}}class Do{constructor(){this.addEventListeners()}addEventListeners(){window.addEventListener("message",async e=>{if(e&&e.data&&e.data.target==="LEDGER-IFRAME"){const{action:r,params:s}=e.data,a=`${r}-reply`;switch(r){case"ledger-get-configuration":await this.getConfiguration(a);break;case"ledger-get-public-key":await this.getPublicKey(a,s);break;case"ledger-get-address":await this.getAddress(a,s);break;case"ledger-sign-message":await this.signMessage(a,s);break;case"ledger-sign-transaction":await this.signTransaction(a,s);break;case"ledger-close-bridge":await this.cleanUp(a);break}}},!1)}sendMessageToExtension(e){window.parent.postMessage(e,"*")}async makeApp(){try{this.transport=await pe.create(),this.app=new Fo(this.transport)}catch(e){throw console.log("LEDGER:::CREATE APP ERROR",e),e}}async cleanUp(e){this.app=null,this.transport&&await this.transport.close(),e&&this.sendMessageToExtension({action:e,success:!0})}async getConfiguration(e){try{await this.makeApp();const r=await this.app.getConfiguration();this.sendMessageToExtension({action:e,success:!0,payload:r})}catch(r){const s=this.ledgerErrToMessage(r);this.sendMessageToExtension({action:e,success:!1,error:new Error(s.toString())})}finally{await this.cleanUp()}}async getPublicKey(e,r){try{await this.makeApp();const s=await this.app.getPublicKey(r);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const a=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(a.toString())})}finally{await this.cleanUp()}}async getAddress(e,r){try{await this.makeApp();const s=await this.app.getAddress(r);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const a=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(a.toString())})}finally{await this.cleanUp()}}async signMessage(e,r){try{await this.makeApp();const s=await this.app.signMessage(r);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const a=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(a.toString())})}finally{await this.cleanUp()}}async signTransaction(e,r){try{await this.makeApp();const s=await this.app.signTransaction(r);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const a=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(a.toString())})}finally{await this.cleanUp()}}ledgerErrToMessage(e){const r=c=>String(c.message||c).includes("0x6700"),s=c=>String(c.message||c).includes("0x6804"),a=c=>c.name&&c.name.includes("TransportOpenUserCancelled"),l=c=>c.message&&c.message.includes("Message signing is not supported"),h=c=>c.message&&c.message.includes("Transaction approval request was rejected");return r(e)?"LEDGER_WRONG_APP":s(e)?"LEDGER_LOCKED":h(e)?"TRANSACTION_REJECTED":l(e)?"SIGN_NON_SUPPORTED":a(e)&&e.message&&e.message.includes("Access denied to use Ledger device")?"USER_DENIED":a(e)&&e.message&&e.message.includes("Failed to execute 'requestDevice' on 'HID'")?"USER_CANCELLED":e.toString()}}(()=>{const e=new URLSearchParams(window.location.search).get("theme")||"default",r=document.querySelector(`[data-theme="${e}"]`);r.style.display=null;const s=new Do,a=r.querySelector('[data-action="pairing"]');a&&a.addEventListener("click",()=>s.getConfiguration());const l=r.querySelector('[data-action="back"]');l&&l.addEventListener("click",()=>s.cleanUp("ledger-bridge-back")),console.log(`EVER Wallet <=> Ledger Bridge initialized from ${window.location}!`)})();
