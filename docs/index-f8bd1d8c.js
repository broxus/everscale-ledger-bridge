(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function mr(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var P={},He={};He.byteLength=Wr;He.toByteArray=Yr;He.fromByteArray=Zr;var re=[],Y=[],Hr=typeof Uint8Array<"u"?Uint8Array:Array,ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ye=0,qr=ct.length;ye<qr;++ye)re[ye]=ct[ye],Y[ct.charCodeAt(ye)]=ye;Y["-".charCodeAt(0)]=62;Y["_".charCodeAt(0)]=63;function yr(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=i.indexOf("=");r===-1&&(r=e);var s=r===e?0:4-r%4;return[r,s]}function Wr(i){var e=yr(i),r=e[0],s=e[1];return(r+s)*3/4-s}function Kr(i,e,r){return(e+r)*3/4-r}function Yr(i){var e,r=yr(i),s=r[0],a=r[1],l=new Hr(Kr(i,s,a)),h=0,u=a>0?s-4:s,p;for(p=0;p<u;p+=4)e=Y[i.charCodeAt(p)]<<18|Y[i.charCodeAt(p+1)]<<12|Y[i.charCodeAt(p+2)]<<6|Y[i.charCodeAt(p+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=e&255;return a===2&&(e=Y[i.charCodeAt(p)]<<2|Y[i.charCodeAt(p+1)]>>4,l[h++]=e&255),a===1&&(e=Y[i.charCodeAt(p)]<<10|Y[i.charCodeAt(p+1)]<<4|Y[i.charCodeAt(p+2)]>>2,l[h++]=e>>8&255,l[h++]=e&255),l}function zr(i){return re[i>>18&63]+re[i>>12&63]+re[i>>6&63]+re[i&63]}function Jr(i,e,r){for(var s,a=[],l=e;l<r;l+=3)s=(i[l]<<16&16711680)+(i[l+1]<<8&65280)+(i[l+2]&255),a.push(zr(s));return a.join("")}function Zr(i){for(var e,r=i.length,s=r%3,a=[],l=16383,h=0,u=r-s;h<u;h+=l)a.push(Jr(i,h,h+l>u?u:h+l));return s===1?(e=i[r-1],a.push(re[e>>2]+re[e<<4&63]+"==")):s===2&&(e=(i[r-2]<<8)+i[r-1],a.push(re[e>>10]+re[e>>4&63]+re[e<<2&63]+"=")),a.join("")}var It={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */It.read=function(i,e,r,s,a){var l,h,u=a*8-s-1,p=(1<<u)-1,E=p>>1,m=-7,y=r?a-1:0,N=r?-1:1,I=i[e+y];for(y+=N,l=I&(1<<-m)-1,I>>=-m,m+=u;m>0;l=l*256+i[e+y],y+=N,m-=8);for(h=l&(1<<-m)-1,l>>=-m,m+=s;m>0;h=h*256+i[e+y],y+=N,m-=8);if(l===0)l=1-E;else{if(l===p)return h?NaN:(I?-1:1)*(1/0);h=h+Math.pow(2,s),l=l-E}return(I?-1:1)*h*Math.pow(2,l-s)};It.write=function(i,e,r,s,a,l){var h,u,p,E=l*8-a-1,m=(1<<E)-1,y=m>>1,N=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=s?0:l-1,A=s?1:-1,M=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,h=m):(h=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-h))<1&&(h--,p*=2),h+y>=1?e+=N/p:e+=N*Math.pow(2,1-y),e*p>=2&&(h++,p/=2),h+y>=m?(u=0,h=m):h+y>=1?(u=(e*p-1)*Math.pow(2,a),h=h+y):(u=e*Math.pow(2,y-1)*Math.pow(2,a),h=0));a>=8;i[r+I]=u&255,I+=A,u/=256,a-=8);for(h=h<<a|u,E+=a;E>0;i[r+I]=h&255,I+=A,h/=256,E-=8);i[r+I-A]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=He,r=It,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=u,i.SlowBuffer=k,i.INSPECT_MAX_BYTES=50;const a=2147483647;i.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const o=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(o,t),o.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function h(o){if(o>a)throw new RangeError('The value "'+o+'" is invalid for option "size"');const t=new Uint8Array(o);return Object.setPrototypeOf(t,u.prototype),t}function u(o,t,n){if(typeof o=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(o)}return p(o,t,n)}u.poolSize=8192;function p(o,t,n){if(typeof o=="string")return N(o,t);if(ArrayBuffer.isView(o))return A(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(ee(o,ArrayBuffer)||o&&ee(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(o,SharedArrayBuffer)||o&&ee(o.buffer,SharedArrayBuffer)))return M(o,t,n);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const c=o.valueOf&&o.valueOf();if(c!=null&&c!==o)return u.from(c,t,n);const f=V(o);if(f)return f;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return u.from(o[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}u.from=function(o,t,n){return p(o,t,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function E(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function m(o,t,n){return E(o),o<=0?h(o):t!==void 0?typeof n=="string"?h(o).fill(t,n):h(o).fill(t):h(o)}u.alloc=function(o,t,n){return m(o,t,n)};function y(o){return E(o),h(o<0?0:K(o)|0)}u.allocUnsafe=function(o){return y(o)},u.allocUnsafeSlow=function(o){return y(o)};function N(o,t){if((typeof t!="string"||t==="")&&(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=Q(o,t)|0;let c=h(n);const f=c.write(o,t);return f!==n&&(c=c.slice(0,f)),c}function I(o){const t=o.length<0?0:K(o.length)|0,n=h(t);for(let c=0;c<t;c+=1)n[c]=o[c]&255;return n}function A(o){if(ee(o,Uint8Array)){const t=new Uint8Array(o);return M(t.buffer,t.byteOffset,t.byteLength)}return I(o)}function M(o,t,n){if(t<0||o.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let c;return t===void 0&&n===void 0?c=new Uint8Array(o):n===void 0?c=new Uint8Array(o,t):c=new Uint8Array(o,t,n),Object.setPrototypeOf(c,u.prototype),c}function V(o){if(u.isBuffer(o)){const t=K(o.length)|0,n=h(t);return n.length===0||o.copy(n,0,0,t),n}if(o.length!==void 0)return typeof o.length!="number"||at(o.length)?h(0):I(o);if(o.type==="Buffer"&&Array.isArray(o.data))return I(o.data)}function K(o){if(o>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return o|0}function k(o){return+o!=o&&(o=0),u.alloc(+o)}u.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==u.prototype},u.compare=function(t,n){if(ee(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),ee(n,Uint8Array)&&(n=u.from(n,n.offset,n.byteLength)),!u.isBuffer(t)||!u.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let c=t.length,f=n.length;for(let d=0,g=Math.min(c,f);d<g;++d)if(t[d]!==n[d]){c=t[d],f=n[d];break}return c<f?-1:f<c?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return u.alloc(0);let c;if(n===void 0)for(n=0,c=0;c<t.length;++c)n+=t[c].length;const f=u.allocUnsafe(n);let d=0;for(c=0;c<t.length;++c){let g=t[c];if(ee(g,Uint8Array))d+g.length>f.length?(u.isBuffer(g)||(g=u.from(g)),g.copy(f,d)):Uint8Array.prototype.set.call(f,g,d);else if(u.isBuffer(g))g.copy(f,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=g.length}return f};function Q(o,t){if(u.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||ee(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);const n=o.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&n===0)return 0;let f=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return ot(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return bt(o).length;default:if(f)return c?-1:ot(o).length;t=(""+t).toLowerCase(),f=!0}}u.byteLength=Q;function Ze(o,t,n){let c=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(o||(o="utf8");;)switch(o){case"hex":return S(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return $(this,t,n);case"latin1":case"binary":return v(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,n);default:if(c)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),c=!0}}u.prototype._isBuffer=!0;function ne(o,t,n){const c=o[t];o[t]=o[n],o[n]=c}u.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)ne(this,n,n+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)ne(this,n,n+3),ne(this,n+1,n+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)ne(this,n,n+7),ne(this,n+1,n+6),ne(this,n+2,n+5),ne(this,n+3,n+4);return this},u.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?w(this,0,t):Ze.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:u.compare(this,t)===0},u.prototype.inspect=function(){let t="";const n=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(t,n,c,f,d){if(ee(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),c===void 0&&(c=t?t.length:0),f===void 0&&(f=0),d===void 0&&(d=this.length),n<0||c>t.length||f<0||d>this.length)throw new RangeError("out of range index");if(f>=d&&n>=c)return 0;if(f>=d)return-1;if(n>=c)return 1;if(n>>>=0,c>>>=0,f>>>=0,d>>>=0,this===t)return 0;let g=d-f,B=c-n;const G=Math.min(g,B),F=this.slice(f,d),j=t.slice(n,c);for(let b=0;b<G;++b)if(F[b]!==j[b]){g=F[b],B=j[b];break}return g<B?-1:B<g?1:0};function _e(o,t,n,c,f){if(o.length===0)return-1;if(typeof n=="string"?(c=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,at(n)&&(n=f?0:o.length-1),n<0&&(n=o.length+n),n>=o.length){if(f)return-1;n=o.length-1}else if(n<0)if(f)n=0;else return-1;if(typeof t=="string"&&(t=u.from(t,c)),u.isBuffer(t))return t.length===0?-1:Ue(o,t,n,c,f);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?f?Uint8Array.prototype.indexOf.call(o,t,n):Uint8Array.prototype.lastIndexOf.call(o,t,n):Ue(o,[t],n,c,f);throw new TypeError("val must be string, number or Buffer")}function Ue(o,t,n,c,f){let d=1,g=o.length,B=t.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(o.length<2||t.length<2)return-1;d=2,g/=2,B/=2,n/=2}function G(j,b){return d===1?j[b]:j.readUInt16BE(b*d)}let F;if(f){let j=-1;for(F=n;F<g;F++)if(G(o,F)===G(t,j===-1?0:F-j)){if(j===-1&&(j=F),F-j+1===B)return j*d}else j!==-1&&(F-=F-j),j=-1}else for(n+B>g&&(n=g-B),F=n;F>=0;F--){let j=!0;for(let b=0;b<B;b++)if(G(o,F+b)!==G(t,b)){j=!1;break}if(j)return F}return-1}u.prototype.includes=function(t,n,c){return this.indexOf(t,n,c)!==-1},u.prototype.indexOf=function(t,n,c){return _e(this,t,n,c,!0)},u.prototype.lastIndexOf=function(t,n,c){return _e(this,t,n,c,!1)};function Qe(o,t,n,c){n=Number(n)||0;const f=o.length-n;c?(c=Number(c),c>f&&(c=f)):c=f;const d=t.length;c>d/2&&(c=d/2);let g;for(g=0;g<c;++g){const B=parseInt(t.substr(g*2,2),16);if(at(B))return g;o[n+g]=B}return g}function et(o,t,n,c){return Ce(ot(t,o.length-n),o,n,c)}function tt(o,t,n,c){return Ce(jr(t),o,n,c)}function rt(o,t,n,c){return Ce(bt(t),o,n,c)}function nt(o,t,n,c){return Ce(kr(t,o.length-n),o,n,c)}u.prototype.write=function(t,n,c,f){if(n===void 0)f="utf8",c=this.length,n=0;else if(c===void 0&&typeof n=="string")f=n,c=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(c)?(c=c>>>0,f===void 0&&(f="utf8")):(f=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const d=this.length-n;if((c===void 0||c>d)&&(c=d),t.length>0&&(c<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");f||(f="utf8");let g=!1;for(;;)switch(f){case"hex":return Qe(this,t,n,c);case"utf8":case"utf-8":return et(this,t,n,c);case"ascii":case"latin1":case"binary":return tt(this,t,n,c);case"base64":return rt(this,t,n,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nt(this,t,n,c);default:if(g)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase(),g=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(o,t,n){return t===0&&n===o.length?e.fromByteArray(o):e.fromByteArray(o.slice(t,n))}function w(o,t,n){n=Math.min(o.length,n);const c=[];let f=t;for(;f<n;){const d=o[f];let g=null,B=d>239?4:d>223?3:d>191?2:1;if(f+B<=n){let G,F,j,b;switch(B){case 1:d<128&&(g=d);break;case 2:G=o[f+1],(G&192)===128&&(b=(d&31)<<6|G&63,b>127&&(g=b));break;case 3:G=o[f+1],F=o[f+2],(G&192)===128&&(F&192)===128&&(b=(d&15)<<12|(G&63)<<6|F&63,b>2047&&(b<55296||b>57343)&&(g=b));break;case 4:G=o[f+1],F=o[f+2],j=o[f+3],(G&192)===128&&(F&192)===128&&(j&192)===128&&(b=(d&15)<<18|(G&63)<<12|(F&63)<<6|j&63,b>65535&&b<1114112&&(g=b))}}g===null?(g=65533,B=1):g>65535&&(g-=65536,c.push(g>>>10&1023|55296),g=56320|g&1023),c.push(g),f+=B}return L(c)}const T=4096;function L(o){const t=o.length;if(t<=T)return String.fromCharCode.apply(String,o);let n="",c=0;for(;c<t;)n+=String.fromCharCode.apply(String,o.slice(c,c+=T));return n}function $(o,t,n){let c="";n=Math.min(o.length,n);for(let f=t;f<n;++f)c+=String.fromCharCode(o[f]&127);return c}function v(o,t,n){let c="";n=Math.min(o.length,n);for(let f=t;f<n;++f)c+=String.fromCharCode(o[f]);return c}function S(o,t,n){const c=o.length;(!t||t<0)&&(t=0),(!n||n<0||n>c)&&(n=c);let f="";for(let d=t;d<n;++d)f+=Vr[o[d]];return f}function U(o,t,n){const c=o.slice(t,n);let f="";for(let d=0;d<c.length-1;d+=2)f+=String.fromCharCode(c[d]+c[d+1]*256);return f}u.prototype.slice=function(t,n){const c=this.length;t=~~t,n=n===void 0?c:~~n,t<0?(t+=c,t<0&&(t=0)):t>c&&(t=c),n<0?(n+=c,n<0&&(n=0)):n>c&&(n=c),n<t&&(n=t);const f=this.subarray(t,n);return Object.setPrototypeOf(f,u.prototype),f};function R(o,t,n){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+t>n)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(t,n,c){t=t>>>0,n=n>>>0,c||R(t,n,this.length);let f=this[t],d=1,g=0;for(;++g<n&&(d*=256);)f+=this[t+g]*d;return f},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,n,c){t=t>>>0,n=n>>>0,c||R(t,n,this.length);let f=this[t+--n],d=1;for(;n>0&&(d*=256);)f+=this[t+--n]*d;return f},u.prototype.readUint8=u.prototype.readUInt8=function(t,n){return t=t>>>0,n||R(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||R(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=ue(function(t){t=t>>>0,me(t,"offset");const n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Ae(t,this.length-8);const f=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,d=this[++t]+this[++t]*2**8+this[++t]*2**16+c*2**24;return BigInt(f)+(BigInt(d)<<BigInt(32))}),u.prototype.readBigUInt64BE=ue(function(t){t=t>>>0,me(t,"offset");const n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Ae(t,this.length-8);const f=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],d=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+c;return(BigInt(f)<<BigInt(32))+BigInt(d)}),u.prototype.readIntLE=function(t,n,c){t=t>>>0,n=n>>>0,c||R(t,n,this.length);let f=this[t],d=1,g=0;for(;++g<n&&(d*=256);)f+=this[t+g]*d;return d*=128,f>=d&&(f-=Math.pow(2,8*n)),f},u.prototype.readIntBE=function(t,n,c){t=t>>>0,n=n>>>0,c||R(t,n,this.length);let f=n,d=1,g=this[t+--f];for(;f>0&&(d*=256);)g+=this[t+--f]*d;return d*=128,g>=d&&(g-=Math.pow(2,8*n)),g},u.prototype.readInt8=function(t,n){return t=t>>>0,n||R(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},u.prototype.readInt16LE=function(t,n){t=t>>>0,n||R(t,2,this.length);const c=this[t]|this[t+1]<<8;return c&32768?c|4294901760:c},u.prototype.readInt16BE=function(t,n){t=t>>>0,n||R(t,2,this.length);const c=this[t+1]|this[t]<<8;return c&32768?c|4294901760:c},u.prototype.readInt32LE=function(t,n){return t=t>>>0,n||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,n){return t=t>>>0,n||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=ue(function(t){t=t>>>0,me(t,"offset");const n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Ae(t,this.length-8);const f=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(c<<24);return(BigInt(f)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),u.prototype.readBigInt64BE=ue(function(t){t=t>>>0,me(t,"offset");const n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Ae(t,this.length-8);const f=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(f)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+c)}),u.prototype.readFloatLE=function(t,n){return t=t>>>0,n||R(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,n){return t=t>>>0,n||R(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||R(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||R(t,8,this.length),r.read(this,t,!1,52,8)};function O(o,t,n,c,f,d){if(!u.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>f||t<d)throw new RangeError('"value" argument is out of bounds');if(n+c>o.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,n,c,f){if(t=+t,n=n>>>0,c=c>>>0,!f){const B=Math.pow(2,8*c)-1;O(this,t,n,c,B,0)}let d=1,g=0;for(this[n]=t&255;++g<c&&(d*=256);)this[n+g]=t/d&255;return n+c},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,n,c,f){if(t=+t,n=n>>>0,c=c>>>0,!f){const B=Math.pow(2,8*c)-1;O(this,t,n,c,B,0)}let d=c-1,g=1;for(this[n+d]=t&255;--d>=0&&(g*=256);)this[n+d]=t/g&255;return n+c},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,n,c){return t=+t,n=n>>>0,c||O(this,t,n,1,255,0),this[n]=t&255,n+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,n,c){return t=+t,n=n>>>0,c||O(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,n,c){return t=+t,n=n>>>0,c||O(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,n,c){return t=+t,n=n>>>0,c||O(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,n,c){return t=+t,n=n>>>0,c||O(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function q(o,t,n,c,f){Ct(t,c,f,o,n,7);let d=Number(t&BigInt(4294967295));o[n++]=d,d=d>>8,o[n++]=d,d=d>>8,o[n++]=d,d=d>>8,o[n++]=d;let g=Number(t>>BigInt(32)&BigInt(4294967295));return o[n++]=g,g=g>>8,o[n++]=g,g=g>>8,o[n++]=g,g=g>>8,o[n++]=g,n}function D(o,t,n,c,f){Ct(t,c,f,o,n,7);let d=Number(t&BigInt(4294967295));o[n+7]=d,d=d>>8,o[n+6]=d,d=d>>8,o[n+5]=d,d=d>>8,o[n+4]=d;let g=Number(t>>BigInt(32)&BigInt(4294967295));return o[n+3]=g,g=g>>8,o[n+2]=g,g=g>>8,o[n+1]=g,g=g>>8,o[n]=g,n+8}u.prototype.writeBigUInt64LE=ue(function(t,n=0){return q(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ue(function(t,n=0){return D(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(t,n,c,f){if(t=+t,n=n>>>0,!f){const G=Math.pow(2,8*c-1);O(this,t,n,c,G-1,-G)}let d=0,g=1,B=0;for(this[n]=t&255;++d<c&&(g*=256);)t<0&&B===0&&this[n+d-1]!==0&&(B=1),this[n+d]=(t/g>>0)-B&255;return n+c},u.prototype.writeIntBE=function(t,n,c,f){if(t=+t,n=n>>>0,!f){const G=Math.pow(2,8*c-1);O(this,t,n,c,G-1,-G)}let d=c-1,g=1,B=0;for(this[n+d]=t&255;--d>=0&&(g*=256);)t<0&&B===0&&this[n+d+1]!==0&&(B=1),this[n+d]=(t/g>>0)-B&255;return n+c},u.prototype.writeInt8=function(t,n,c){return t=+t,n=n>>>0,c||O(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1},u.prototype.writeInt16LE=function(t,n,c){return t=+t,n=n>>>0,c||O(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2},u.prototype.writeInt16BE=function(t,n,c){return t=+t,n=n>>>0,c||O(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2},u.prototype.writeInt32LE=function(t,n,c){return t=+t,n=n>>>0,c||O(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4},u.prototype.writeInt32BE=function(t,n,c){return t=+t,n=n>>>0,c||O(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4},u.prototype.writeBigInt64LE=ue(function(t,n=0){return q(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ue(function(t,n=0){return D(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ce(o,t,n,c,f,d){if(n+c>o.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function it(o,t,n,c,f){return t=+t,n=n>>>0,f||ce(o,t,n,4),r.write(o,t,n,c,23,4),n+4}u.prototype.writeFloatLE=function(t,n,c){return it(this,t,n,!0,c)},u.prototype.writeFloatBE=function(t,n,c){return it(this,t,n,!1,c)};function _t(o,t,n,c,f){return t=+t,n=n>>>0,f||ce(o,t,n,8),r.write(o,t,n,c,52,8),n+8}u.prototype.writeDoubleLE=function(t,n,c){return _t(this,t,n,!0,c)},u.prototype.writeDoubleBE=function(t,n,c){return _t(this,t,n,!1,c)},u.prototype.copy=function(t,n,c,f){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(c||(c=0),!f&&f!==0&&(f=this.length),n>=t.length&&(n=t.length),n||(n=0),f>0&&f<c&&(f=c),f===c||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length),t.length-n<f-c&&(f=t.length-n+c);const d=f-c;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,c,f):Uint8Array.prototype.set.call(t,this.subarray(c,f),n),d},u.prototype.fill=function(t,n,c,f){if(typeof t=="string"){if(typeof n=="string"?(f=n,n=0,c=this.length):typeof c=="string"&&(f=c,c=this.length),f!==void 0&&typeof f!="string")throw new TypeError("encoding must be a string");if(typeof f=="string"&&!u.isEncoding(f))throw new TypeError("Unknown encoding: "+f);if(t.length===1){const g=t.charCodeAt(0);(f==="utf8"&&g<128||f==="latin1")&&(t=g)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<c)throw new RangeError("Out of range index");if(c<=n)return this;n=n>>>0,c=c===void 0?this.length:c>>>0,t||(t=0);let d;if(typeof t=="number")for(d=n;d<c;++d)this[d]=t;else{const g=u.isBuffer(t)?t:u.from(t,f),B=g.length;if(B===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(d=0;d<c-n;++d)this[d+n]=g[d%B]}return this};const ge={};function st(o,t,n){ge[o]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,this.stack,delete this.name}get code(){return o}set code(f){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:f,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}}}st("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),st("ERR_INVALID_ARG_TYPE",function(o,t){return`The "${o}" argument must be of type number. Received type ${typeof t}`},TypeError),st("ERR_OUT_OF_RANGE",function(o,t,n){let c=`The value of "${o}" is out of range.`,f=n;return Number.isInteger(n)&&Math.abs(n)>2**32?f=Ut(String(n)):typeof n=="bigint"&&(f=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(f=Ut(f)),f+="n"),c+=` It must be ${t}. Received ${f}`,c},RangeError);function Ut(o){let t="",n=o.length;const c=o[0]==="-"?1:0;for(;n>=c+4;n-=3)t=`_${o.slice(n-3,n)}${t}`;return`${o.slice(0,n)}${t}`}function Pr(o,t,n){me(t,"offset"),(o[t]===void 0||o[t+n]===void 0)&&Ae(t,o.length-(n+1))}function Ct(o,t,n,c,f,d){if(o>n||o<t){const g=typeof t=="bigint"?"n":"";let B;throw d>3?t===0||t===BigInt(0)?B=`>= 0${g} and < 2${g} ** ${(d+1)*8}${g}`:B=`>= -(2${g} ** ${(d+1)*8-1}${g}) and < 2 ** ${(d+1)*8-1}${g}`:B=`>= ${t}${g} and <= ${n}${g}`,new ge.ERR_OUT_OF_RANGE("value",B,o)}Pr(c,f,d)}function me(o,t){if(typeof o!="number")throw new ge.ERR_INVALID_ARG_TYPE(t,"number",o)}function Ae(o,t,n){throw Math.floor(o)!==o?(me(o,n),new ge.ERR_OUT_OF_RANGE(n||"offset","an integer",o)):t<0?new ge.ERR_BUFFER_OUT_OF_BOUNDS:new ge.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,o)}const Mr=/[^+/0-9A-Za-z-_]/g;function Gr(o){if(o=o.split("=")[0],o=o.trim().replace(Mr,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function ot(o,t){t=t||1/0;let n;const c=o.length;let f=null;const d=[];for(let g=0;g<c;++g){if(n=o.charCodeAt(g),n>55295&&n<57344){if(!f){if(n>56319){(t-=3)>-1&&d.push(239,191,189);continue}else if(g+1===c){(t-=3)>-1&&d.push(239,191,189);continue}f=n;continue}if(n<56320){(t-=3)>-1&&d.push(239,191,189),f=n;continue}n=(f-55296<<10|n-56320)+65536}else f&&(t-=3)>-1&&d.push(239,191,189);if(f=null,n<128){if((t-=1)<0)break;d.push(n)}else if(n<2048){if((t-=2)<0)break;d.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;d.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;d.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return d}function jr(o){const t=[];for(let n=0;n<o.length;++n)t.push(o.charCodeAt(n)&255);return t}function kr(o,t){let n,c,f;const d=[];for(let g=0;g<o.length&&!((t-=2)<0);++g)n=o.charCodeAt(g),c=n>>8,f=n%256,d.push(f),d.push(c);return d}function bt(o){return e.toByteArray(Gr(o))}function Ce(o,t,n,c){let f;for(f=0;f<c&&!(f+n>=t.length||f>=o.length);++f)t[f+n]=o[f];return f}function ee(o,t){return o instanceof t||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===t.name}function at(o){return o!==o}const Vr=function(){const o="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const c=n*16;for(let f=0;f<16;++f)t[c+f]=o[n]+o[f]}return t}();function ue(o){return typeof BigInt>"u"?Xr:o}function Xr(){throw new Error("BigInt not supported")}})(P);window.Buffer=P.Buffer;var xt={exports:{}},xe=typeof Reflect=="object"?Reflect:null,Ft=xe&&typeof xe.apply=="function"?xe.apply:function(e,r,s){return Function.prototype.apply.call(e,r,s)},ke;xe&&typeof xe.ownKeys=="function"?ke=xe.ownKeys:Object.getOwnPropertySymbols?ke=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ke=function(e){return Object.getOwnPropertyNames(e)};function Qr(i){console&&console.warn&&console.warn(i)}var wr=Number.isNaN||function(e){return e!==e};function C(){C.init.call(this)}xt.exports=C;xt.exports.once=nn;C.EventEmitter=C;C.prototype._events=void 0;C.prototype._eventsCount=0;C.prototype._maxListeners=void 0;var Dt=10;function qe(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return Dt},set:function(i){if(typeof i!="number"||i<0||wr(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Dt=i}});C.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};C.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||wr(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ir(i){return i._maxListeners===void 0?C.defaultMaxListeners:i._maxListeners}C.prototype.getMaxListeners=function(){return Ir(this)};C.prototype.emit=function(e){for(var r=[],s=1;s<arguments.length;s++)r.push(arguments[s]);var a=e==="error",l=this._events;if(l!==void 0)a=a&&l.error===void 0;else if(!a)return!1;if(a){var h;if(r.length>0&&(h=r[0]),h instanceof Error)throw h;var u=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw u.context=h,u}var p=l[e];if(p===void 0)return!1;if(typeof p=="function")Ft(p,this,r);else for(var E=p.length,m=Lr(p,E),s=0;s<E;++s)Ft(m[s],this,r);return!0};function xr(i,e,r,s){var a,l,h;if(qe(r),l=i._events,l===void 0?(l=i._events=Object.create(null),i._eventsCount=0):(l.newListener!==void 0&&(i.emit("newListener",e,r.listener?r.listener:r),l=i._events),h=l[e]),h===void 0)h=l[e]=r,++i._eventsCount;else if(typeof h=="function"?h=l[e]=s?[r,h]:[h,r]:s?h.unshift(r):h.push(r),a=Ir(i),a>0&&h.length>a&&!h.warned){h.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=i,u.type=e,u.count=h.length,Qr(u)}return i}C.prototype.addListener=function(e,r){return xr(this,e,r,!1)};C.prototype.on=C.prototype.addListener;C.prototype.prependListener=function(e,r){return xr(this,e,r,!0)};function en(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vr(i,e,r){var s={fired:!1,wrapFn:void 0,target:i,type:e,listener:r},a=en.bind(s);return a.listener=r,s.wrapFn=a,a}C.prototype.once=function(e,r){return qe(r),this.on(e,vr(this,e,r)),this};C.prototype.prependOnceListener=function(e,r){return qe(r),this.prependListener(e,vr(this,e,r)),this};C.prototype.removeListener=function(e,r){var s,a,l,h,u;if(qe(r),a=this._events,a===void 0)return this;if(s=a[e],s===void 0)return this;if(s===r||s.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,s.listener||r));else if(typeof s!="function"){for(l=-1,h=s.length-1;h>=0;h--)if(s[h]===r||s[h].listener===r){u=s[h].listener,l=h;break}if(l<0)return this;l===0?s.shift():tn(s,l),s.length===1&&(a[e]=s[0]),a.removeListener!==void 0&&this.emit("removeListener",e,u||r)}return this};C.prototype.off=C.prototype.removeListener;C.prototype.removeAllListeners=function(e){var r,s,a;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var l=Object.keys(s),h;for(a=0;a<l.length;++a)h=l[a],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=s[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this};function Rr(i,e,r){var s=i._events;if(s===void 0)return[];var a=s[e];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?rn(a):Lr(a,a.length)}C.prototype.listeners=function(e){return Rr(this,e,!0)};C.prototype.rawListeners=function(e){return Rr(this,e,!1)};C.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Ar.call(i,e)};C.prototype.listenerCount=Ar;function Ar(i){var e=this._events;if(e!==void 0){var r=e[i];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}C.prototype.eventNames=function(){return this._eventsCount>0?ke(this._events):[]};function Lr(i,e){for(var r=new Array(e),s=0;s<e;++s)r[s]=i[s];return r}function tn(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function rn(i){for(var e=new Array(i.length),r=0;r<e.length;++r)e[r]=i[r].listener||i[r];return e}function nn(i,e){return new Promise(function(r,s){function a(h){i.removeListener(e,l),s(h)}function l(){typeof i.removeListener=="function"&&i.removeListener("error",a),r([].slice.call(arguments))}$r(i,e,l,{once:!0}),e!=="error"&&sn(i,a,{once:!0})})}function sn(i,e,r){typeof i.on=="function"&&$r(i,"error",e,r)}function $r(i,e,r,s){if(typeof i.on=="function")s.once?i.once(e,r):i.on(e,r);else if(typeof i.addEventListener=="function")i.addEventListener(e,function a(l){s.once&&i.removeEventListener(e,a),r(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var on=xt.exports;const an=mr(on),Oe=i=>{class e extends Error{constructor(s,a,l){if(super(s||i,l),Object.setPrototypeOf(this,e.prototype),this.name=i,a)for(const h in a)this[h]=a[h];if(l&&cn(l)&&"cause"in l&&!("cause"in this)){const h=l.cause;this.cause=h,"stack"in h&&(this.stack=this.stack+`
CAUSE: `+h.stack)}}}return e};function cn(i){return typeof i=="object"}const un=Oe("LockedDeviceError"),ln=Oe("DisconnectedDevice"),hn=Oe("DisconnectedDeviceDuringOperation"),Pt=Oe("TransportOpenUserCancelled"),fn=Oe("TransportRaceCondition");var Mt;(function(i){i.Unknown="Unknown",i.LocationServicesDisabled="LocationServicesDisabled",i.LocationServicesUnauthorized="LocationServicesUnauthorized",i.BluetoothScanStartFailed="BluetoothScanStartFailed"})(Mt||(Mt={}));class he extends Error{constructor(e,r){const s="TransportError";super(e||s),this.name=s,this.message=e,this.stack=new Error(e).stack,this.id=r}}const Se={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,CUSTOM_IMAGE_BOOTLOADER:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738};function pn(i){switch(i){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=i&&i<=28671)return"Internal error, please report"}function mt(i){const e=Object.keys(Se).find(l=>Se[l]===i)||"UNKNOWN_ERROR",r=pn(i)||e,s=i.toString(16),a=`Ledger device: ${r} (0x${s})`;if(i===Se.LOCKED_DEVICE)throw new un(a);this.name="TransportStatusError",this.message=a,this.stack=new Error(a).stack,this.statusCode=i,this.statusText=e}mt.prototype=new Error;var be=globalThis&&globalThis.__awaiter||function(i,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function u(m){try{E(s.next(m))}catch(y){h(y)}}function p(m){try{E(s.throw(m))}catch(y){h(y)}}function E(m){m.done?l(m.value):a(m.value).then(u,p)}E((s=s.apply(i,e||[])).next())})};class vt{constructor(){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new an,this.send=(e,r,s,a,l=Buffer.alloc(0),h=[Se.OK])=>be(this,void 0,void 0,function*(){if(l.length>=256)throw new he("data.length exceed 256 bytes limit. Got: "+l.length,"DataLengthTooBig");const u=yield this.exchange(Buffer.concat([Buffer.from([e,r,s,a]),Buffer.from([l.length]),l])),p=u.readUInt16BE(u.length-2);if(!h.some(E=>E===p))throw new mt(p);return u}),this.exchangeAtomicImpl=e=>be(this,void 0,void 0,function*(){if(this.exchangeBusyPromise)throw new fn("An action was already pending on the Ledger device. Please deny or reconnect.");let r;const s=new Promise(h=>{r=h});this.exchangeBusyPromise=s;let a=!1;const l=setTimeout(()=>{a=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const h=yield e();return a&&this.emit("responsive"),h}finally{clearTimeout(l),r&&r(),this.exchangeBusyPromise=null}}),this._appAPIlock=null}exchange(e){throw new Error("exchange not implemented")}exchangeBulk(e,r){let s=!1;const a=()=>{s=!0};return(()=>be(this,void 0,void 0,function*(){if(!s)for(const h of e){const u=yield this.exchange(h);if(s)return;const p=u.readUInt16BE(u.length-2);if(p!==Se.OK)throw new mt(p);r.next(u)}}))().then(()=>!s&&r.complete(),h=>!s&&r.error(h)),{unsubscribe:a}}setScrambleKey(e){}close(){return Promise.resolve()}on(e,r){this._events.on(e,r)}off(e,r){this._events.removeListener(e,r)}emit(e,...r){this._events.emit(e,...r)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}static create(e=3e3,r){return new Promise((s,a)=>{let l=!1;const h=this.listen({next:p=>{l=!0,h&&h.unsubscribe(),u&&clearTimeout(u),this.open(p.descriptor,e).then(s,a)},error:p=>{u&&clearTimeout(u),a(p)},complete:()=>{u&&clearTimeout(u),l||a(new he(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),u=r?setTimeout(()=>{h.unsubscribe(),a(new he(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},r):null})}decorateAppAPIMethods(e,r,s){for(const a of r)e[a]=this.decorateAppAPIMethod(a,e[a],e,s)}decorateAppAPIMethod(e,r,s,a){return(...l)=>be(this,void 0,void 0,function*(){const{_appAPIlock:h}=this;if(h)return Promise.reject(new he("Ledger Device is busy (lock "+h+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(a),yield r.apply(s,l)}finally{this._appAPIlock=null}})}}vt.ErrorMessage_ListenTimeout="No Ledger device found (timeout)";vt.ErrorMessage_NoDeviceFound="No Ledger device found";const Gt=5;function dn(i){const e=Buffer.alloc(2);return e.writeUInt16BE(i,0),e}const En={data:Buffer.alloc(0),dataLength:0,sequence:0},gn=(i,e)=>({makeBlocks(r){let s=Buffer.concat([dn(r.length),r]);const a=e-5,l=Math.ceil(s.length/a);s=Buffer.concat([s,Buffer.alloc(l*a-s.length+1).fill(0)]);const h=[];for(let u=0;u<l;u++){const p=Buffer.alloc(5);p.writeUInt16BE(i,0),p.writeUInt8(Gt,2),p.writeUInt16BE(u,3);const E=s.slice(u*a,(u+1)*a);h.push(Buffer.concat([p,E]))}return h},reduceResponse(r,s){let{data:a,dataLength:l,sequence:h}=r||En;if(s.readUInt16BE(0)!==i)throw new he("Invalid channel","InvalidChannel");if(s.readUInt8(2)!==Gt)throw new he("Invalid tag","InvalidTag");if(s.readUInt16BE(3)!==h)throw new he("Invalid sequence","InvalidSequence");r||(l=s.readUInt16BE(5)),h++;const u=s.slice(r?5:7);return a=Buffer.concat([a,u]),a.length>l&&(a=a.slice(0,l)),{data:a,dataLength:l,sequence:h}},getReducedResult(r){if(r&&r.dataLength===r.data.length)return r.data}});var yt={exports:{}};const mn="2.0.0",Tr=256,yn=Number.MAX_SAFE_INTEGER||9007199254740991,wn=16,In=Tr-6,xn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var We={MAX_LENGTH:Tr,MAX_SAFE_COMPONENT_LENGTH:wn,MAX_SAFE_BUILD_LENGTH:In,MAX_SAFE_INTEGER:yn,RELEASE_TYPES:xn,SEMVER_SPEC_VERSION:mn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const vn=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...i)=>console.error("SEMVER",...i):()=>{};var Ke=vn;(function(i,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:a}=We,l=Ke;e=i.exports={};const h=e.re=[],u=e.safeRe=[],p=e.src=[],E=e.t={};let m=0;const y="[a-zA-Z0-9-]",N=[["\\s",1],["\\d",a],[y,s]],I=M=>{for(const[V,K]of N)M=M.split(`${V}*`).join(`${V}{0,${K}}`).split(`${V}+`).join(`${V}{1,${K}}`);return M},A=(M,V,K)=>{const k=I(V),Q=m++;l(M,Q,V),E[M]=Q,p[Q]=V,h[Q]=new RegExp(V,K?"g":void 0),u[Q]=new RegExp(k,K?"g":void 0)};A("NUMERICIDENTIFIER","0|[1-9]\\d*"),A("NUMERICIDENTIFIERLOOSE","\\d+"),A("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${y}*`),A("MAINVERSION",`(${p[E.NUMERICIDENTIFIER]})\\.(${p[E.NUMERICIDENTIFIER]})\\.(${p[E.NUMERICIDENTIFIER]})`),A("MAINVERSIONLOOSE",`(${p[E.NUMERICIDENTIFIERLOOSE]})\\.(${p[E.NUMERICIDENTIFIERLOOSE]})\\.(${p[E.NUMERICIDENTIFIERLOOSE]})`),A("PRERELEASEIDENTIFIER",`(?:${p[E.NUMERICIDENTIFIER]}|${p[E.NONNUMERICIDENTIFIER]})`),A("PRERELEASEIDENTIFIERLOOSE",`(?:${p[E.NUMERICIDENTIFIERLOOSE]}|${p[E.NONNUMERICIDENTIFIER]})`),A("PRERELEASE",`(?:-(${p[E.PRERELEASEIDENTIFIER]}(?:\\.${p[E.PRERELEASEIDENTIFIER]})*))`),A("PRERELEASELOOSE",`(?:-?(${p[E.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[E.PRERELEASEIDENTIFIERLOOSE]})*))`),A("BUILDIDENTIFIER",`${y}+`),A("BUILD",`(?:\\+(${p[E.BUILDIDENTIFIER]}(?:\\.${p[E.BUILDIDENTIFIER]})*))`),A("FULLPLAIN",`v?${p[E.MAINVERSION]}${p[E.PRERELEASE]}?${p[E.BUILD]}?`),A("FULL",`^${p[E.FULLPLAIN]}$`),A("LOOSEPLAIN",`[v=\\s]*${p[E.MAINVERSIONLOOSE]}${p[E.PRERELEASELOOSE]}?${p[E.BUILD]}?`),A("LOOSE",`^${p[E.LOOSEPLAIN]}$`),A("GTLT","((?:<|>)?=?)"),A("XRANGEIDENTIFIERLOOSE",`${p[E.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),A("XRANGEIDENTIFIER",`${p[E.NUMERICIDENTIFIER]}|x|X|\\*`),A("XRANGEPLAIN",`[v=\\s]*(${p[E.XRANGEIDENTIFIER]})(?:\\.(${p[E.XRANGEIDENTIFIER]})(?:\\.(${p[E.XRANGEIDENTIFIER]})(?:${p[E.PRERELEASE]})?${p[E.BUILD]}?)?)?`),A("XRANGEPLAINLOOSE",`[v=\\s]*(${p[E.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[E.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[E.XRANGEIDENTIFIERLOOSE]})(?:${p[E.PRERELEASELOOSE]})?${p[E.BUILD]}?)?)?`),A("XRANGE",`^${p[E.GTLT]}\\s*${p[E.XRANGEPLAIN]}$`),A("XRANGELOOSE",`^${p[E.GTLT]}\\s*${p[E.XRANGEPLAINLOOSE]}$`),A("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),A("COERCERTL",p[E.COERCE],!0),A("LONETILDE","(?:~>?)"),A("TILDETRIM",`(\\s*)${p[E.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",A("TILDE",`^${p[E.LONETILDE]}${p[E.XRANGEPLAIN]}$`),A("TILDELOOSE",`^${p[E.LONETILDE]}${p[E.XRANGEPLAINLOOSE]}$`),A("LONECARET","(?:\\^)"),A("CARETTRIM",`(\\s*)${p[E.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",A("CARET",`^${p[E.LONECARET]}${p[E.XRANGEPLAIN]}$`),A("CARETLOOSE",`^${p[E.LONECARET]}${p[E.XRANGEPLAINLOOSE]}$`),A("COMPARATORLOOSE",`^${p[E.GTLT]}\\s*(${p[E.LOOSEPLAIN]})$|^$`),A("COMPARATOR",`^${p[E.GTLT]}\\s*(${p[E.FULLPLAIN]})$|^$`),A("COMPARATORTRIM",`(\\s*)${p[E.GTLT]}\\s*(${p[E.LOOSEPLAIN]}|${p[E.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",A("HYPHENRANGE",`^\\s*(${p[E.XRANGEPLAIN]})\\s+-\\s+(${p[E.XRANGEPLAIN]})\\s*$`),A("HYPHENRANGELOOSE",`^\\s*(${p[E.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[E.XRANGEPLAINLOOSE]})\\s*$`),A("STAR","(<|>)?=?\\s*\\*"),A("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),A("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(yt,yt.exports);var Be=yt.exports;const Rn=Object.freeze({loose:!0}),An=Object.freeze({}),Ln=i=>i?typeof i!="object"?Rn:i:An;var Rt=Ln;const jt=/^[0-9]+$/,Sr=(i,e)=>{const r=jt.test(i),s=jt.test(e);return r&&s&&(i=+i,e=+e),i===e?0:r&&!s?-1:s&&!r?1:i<e?-1:1},$n=(i,e)=>Sr(e,i);var Nr={compareIdentifiers:Sr,rcompareIdentifiers:$n};const Fe=Ke,{MAX_LENGTH:kt,MAX_SAFE_INTEGER:De}=We,{safeRe:Vt,t:Xt}=Be,Tn=Rt,{compareIdentifiers:we}=Nr;let Sn=class te{constructor(e,r){if(r=Tn(r),e instanceof te){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>kt)throw new TypeError(`version is longer than ${kt} characters`);Fe("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const s=e.trim().match(r.loose?Vt[Xt.LOOSE]:Vt[Xt.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>De||this.major<0)throw new TypeError("Invalid major version");if(this.minor>De||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>De||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const l=+a;if(l>=0&&l<De)return l}return a}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Fe("SemVer.compare",this.version,this.options,e),!(e instanceof te)){if(typeof e=="string"&&e===this.version)return 0;e=new te(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof te||(e=new te(e,this.options)),we(this.major,e.major)||we(this.minor,e.minor)||we(this.patch,e.patch)}comparePre(e){if(e instanceof te||(e=new te(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const s=this.prerelease[r],a=e.prerelease[r];if(Fe("prerelease compare",r,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s===a)continue;return we(s,a)}while(++r)}compareBuild(e){e instanceof te||(e=new te(e,this.options));let r=0;do{const s=this.build[r],a=e.build[r];if(Fe("prerelease compare",r,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s===a)continue;return we(s,a)}while(++r)}inc(e,r,s){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,s),this.inc("pre",r,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,s),this.inc("pre",r,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(s)?1:0;if(!r&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let l=this.prerelease.length;for(;--l>=0;)typeof this.prerelease[l]=="number"&&(this.prerelease[l]++,l=-2);if(l===-1){if(r===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(r){let l=[r,a];s===!1&&(l=[r]),we(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=l):this.prerelease=l}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var W=Sn;const Ht=W,Nn=(i,e,r=!1)=>{if(i instanceof Ht)return i;try{return new Ht(i,e)}catch(s){if(!r)return null;throw s}};var Re=Nn;const On=Re,Bn=(i,e)=>{const r=On(i,e);return r?r.version:null};var _n=Bn;const Un=Re,Cn=(i,e)=>{const r=Un(i.trim().replace(/^[=v]+/,""),e);return r?r.version:null};var bn=Cn;const qt=W,Fn=(i,e,r,s,a)=>{typeof r=="string"&&(a=s,s=r,r=void 0);try{return new qt(i instanceof qt?i.version:i,r).inc(e,s,a).version}catch{return null}};var Dn=Fn;const Wt=Re,Pn=(i,e)=>{const r=Wt(i,null,!0),s=Wt(e,null,!0),a=r.compare(s);if(a===0)return null;const l=a>0,h=l?r:s,u=l?s:r,p=!!h.prerelease.length;if(!!u.prerelease.length&&!p)return!u.patch&&!u.minor?"major":h.patch?"patch":h.minor?"minor":"major";const m=p?"pre":"";return r.major!==s.major?m+"major":r.minor!==s.minor?m+"minor":r.patch!==s.patch?m+"patch":"prerelease"};var Mn=Pn;const Gn=W,jn=(i,e)=>new Gn(i,e).major;var kn=jn;const Vn=W,Xn=(i,e)=>new Vn(i,e).minor;var Hn=Xn;const qn=W,Wn=(i,e)=>new qn(i,e).patch;var Kn=Wn;const Yn=Re,zn=(i,e)=>{const r=Yn(i,e);return r&&r.prerelease.length?r.prerelease:null};var Jn=zn;const Kt=W,Zn=(i,e,r)=>new Kt(i,r).compare(new Kt(e,r));var J=Zn;const Qn=J,ei=(i,e,r)=>Qn(e,i,r);var ti=ei;const ri=J,ni=(i,e)=>ri(i,e,!0);var ii=ni;const Yt=W,si=(i,e,r)=>{const s=new Yt(i,r),a=new Yt(e,r);return s.compare(a)||s.compareBuild(a)};var At=si;const oi=At,ai=(i,e)=>i.sort((r,s)=>oi(r,s,e));var ci=ai;const ui=At,li=(i,e)=>i.sort((r,s)=>ui(s,r,e));var hi=li;const fi=J,pi=(i,e,r)=>fi(i,e,r)>0;var Ye=pi;const di=J,Ei=(i,e,r)=>di(i,e,r)<0;var Lt=Ei;const gi=J,mi=(i,e,r)=>gi(i,e,r)===0;var Or=mi;const yi=J,wi=(i,e,r)=>yi(i,e,r)!==0;var Br=wi;const Ii=J,xi=(i,e,r)=>Ii(i,e,r)>=0;var $t=xi;const vi=J,Ri=(i,e,r)=>vi(i,e,r)<=0;var Tt=Ri;const Ai=Or,Li=Br,$i=Ye,Ti=$t,Si=Lt,Ni=Tt,Oi=(i,e,r,s)=>{switch(e){case"===":return typeof i=="object"&&(i=i.version),typeof r=="object"&&(r=r.version),i===r;case"!==":return typeof i=="object"&&(i=i.version),typeof r=="object"&&(r=r.version),i!==r;case"":case"=":case"==":return Ai(i,r,s);case"!=":return Li(i,r,s);case">":return $i(i,r,s);case">=":return Ti(i,r,s);case"<":return Si(i,r,s);case"<=":return Ni(i,r,s);default:throw new TypeError(`Invalid operator: ${e}`)}};var _r=Oi;const Bi=W,_i=Re,{safeRe:Pe,t:Me}=Be,Ui=(i,e)=>{if(i instanceof Bi)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;e=e||{};let r=null;if(!e.rtl)r=i.match(Pe[Me.COERCE]);else{let s;for(;(s=Pe[Me.COERCERTL].exec(i))&&(!r||r.index+r[0].length!==i.length);)(!r||s.index+s[0].length!==r.index+r[0].length)&&(r=s),Pe[Me.COERCERTL].lastIndex=s.index+s[1].length+s[2].length;Pe[Me.COERCERTL].lastIndex=-1}return r===null?null:_i(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};var Ci=Ui,ut,zt;function bi(){return zt||(zt=1,ut=function(i){i.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),ut}var Fi=_;_.Node=Ee;_.create=_;function _(i){var e=this;if(e instanceof _||(e=new _),e.tail=null,e.head=null,e.length=0,i&&typeof i.forEach=="function")i.forEach(function(a){e.push(a)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)e.push(arguments[r]);return e}_.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var e=i.next,r=i.prev;return e&&(e.prev=r),r&&(r.next=e),i===this.head&&(this.head=e),i===this.tail&&(this.tail=r),i.list.length--,i.next=null,i.prev=null,i.list=null,e};_.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var e=this.head;i.list=this,i.next=e,e&&(e.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}};_.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var e=this.tail;i.list=this,i.prev=e,e&&(e.next=i),this.tail=i,this.head||(this.head=i),this.length++}};_.prototype.push=function(){for(var i=0,e=arguments.length;i<e;i++)Pi(this,arguments[i]);return this.length};_.prototype.unshift=function(){for(var i=0,e=arguments.length;i<e;i++)Mi(this,arguments[i]);return this.length};_.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}};_.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}};_.prototype.forEach=function(i,e){e=e||this;for(var r=this.head,s=0;r!==null;s++)i.call(e,r.value,s,this),r=r.next};_.prototype.forEachReverse=function(i,e){e=e||this;for(var r=this.tail,s=this.length-1;r!==null;s--)i.call(e,r.value,s,this),r=r.prev};_.prototype.get=function(i){for(var e=0,r=this.head;r!==null&&e<i;e++)r=r.next;if(e===i&&r!==null)return r.value};_.prototype.getReverse=function(i){for(var e=0,r=this.tail;r!==null&&e<i;e++)r=r.prev;if(e===i&&r!==null)return r.value};_.prototype.map=function(i,e){e=e||this;for(var r=new _,s=this.head;s!==null;)r.push(i.call(e,s.value,this)),s=s.next;return r};_.prototype.mapReverse=function(i,e){e=e||this;for(var r=new _,s=this.tail;s!==null;)r.push(i.call(e,s.value,this)),s=s.prev;return r};_.prototype.reduce=function(i,e){var r,s=this.head;if(arguments.length>1)r=e;else if(this.head)s=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=0;s!==null;a++)r=i(r,s.value,a),s=s.next;return r};_.prototype.reduceReverse=function(i,e){var r,s=this.tail;if(arguments.length>1)r=e;else if(this.tail)s=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=this.length-1;s!==null;a--)r=i(r,s.value,a),s=s.prev;return r};_.prototype.toArray=function(){for(var i=new Array(this.length),e=0,r=this.head;r!==null;e++)i[e]=r.value,r=r.next;return i};_.prototype.toArrayReverse=function(){for(var i=new Array(this.length),e=0,r=this.tail;r!==null;e++)i[e]=r.value,r=r.prev;return i};_.prototype.slice=function(i,e){e=e||this.length,e<0&&(e+=this.length),i=i||0,i<0&&(i+=this.length);var r=new _;if(e<i||e<0)return r;i<0&&(i=0),e>this.length&&(e=this.length);for(var s=0,a=this.head;a!==null&&s<i;s++)a=a.next;for(;a!==null&&s<e;s++,a=a.next)r.push(a.value);return r};_.prototype.sliceReverse=function(i,e){e=e||this.length,e<0&&(e+=this.length),i=i||0,i<0&&(i+=this.length);var r=new _;if(e<i||e<0)return r;i<0&&(i=0),e>this.length&&(e=this.length);for(var s=this.length,a=this.tail;a!==null&&s>e;s--)a=a.prev;for(;a!==null&&s>i;s--,a=a.prev)r.push(a.value);return r};_.prototype.splice=function(i,e,...r){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var s=0,a=this.head;a!==null&&s<i;s++)a=a.next;for(var l=[],s=0;a&&s<e;s++)l.push(a.value),a=this.removeNode(a);a===null&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(var s=0;s<r.length;s++)a=Di(this,a,r[s]);return l};_.prototype.reverse=function(){for(var i=this.head,e=this.tail,r=i;r!==null;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=e,this.tail=i,this};function Di(i,e,r){var s=e===i.head?new Ee(r,null,e,i):new Ee(r,e,e.next,i);return s.next===null&&(i.tail=s),s.prev===null&&(i.head=s),i.length++,s}function Pi(i,e){i.tail=new Ee(e,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function Mi(i,e){i.head=new Ee(e,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function Ee(i,e,r,s){if(!(this instanceof Ee))return new Ee(i,e,r,s);this.list=s,this.value=i,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{bi()(_)}catch{}const Gi=Fi,pe=Symbol("max"),oe=Symbol("length"),Ie=Symbol("lengthCalculator"),Ne=Symbol("allowStale"),de=Symbol("maxAge"),se=Symbol("dispose"),Jt=Symbol("noDisposeOnSet"),X=Symbol("lruList"),z=Symbol("cache"),Ur=Symbol("updateAgeOnGet"),lt=()=>1;class ji{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[pe]=e.max||1/0;const r=e.length||lt;if(this[Ie]=typeof r!="function"?lt:r,this[Ne]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[de]=e.maxAge||0,this[se]=e.dispose,this[Jt]=e.noDisposeOnSet||!1,this[Ur]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[pe]=e||1/0,Le(this)}get max(){return this[pe]}set allowStale(e){this[Ne]=!!e}get allowStale(){return this[Ne]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[de]=e,Le(this)}get maxAge(){return this[de]}set lengthCalculator(e){typeof e!="function"&&(e=lt),e!==this[Ie]&&(this[Ie]=e,this[oe]=0,this[X].forEach(r=>{r.length=this[Ie](r.value,r.key),this[oe]+=r.length})),Le(this)}get lengthCalculator(){return this[Ie]}get length(){return this[oe]}get itemCount(){return this[X].length}rforEach(e,r){r=r||this;for(let s=this[X].tail;s!==null;){const a=s.prev;Zt(this,e,s,r),s=a}}forEach(e,r){r=r||this;for(let s=this[X].head;s!==null;){const a=s.next;Zt(this,e,s,r),s=a}}keys(){return this[X].toArray().map(e=>e.key)}values(){return this[X].toArray().map(e=>e.value)}reset(){this[se]&&this[X]&&this[X].length&&this[X].forEach(e=>this[se](e.key,e.value)),this[z]=new Map,this[X]=new Gi,this[oe]=0}dump(){return this[X].map(e=>Ve(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[X]}set(e,r,s){if(s=s||this[de],s&&typeof s!="number")throw new TypeError("maxAge must be a number");const a=s?Date.now():0,l=this[Ie](r,e);if(this[z].has(e)){if(l>this[pe])return ve(this,this[z].get(e)),!1;const p=this[z].get(e).value;return this[se]&&(this[Jt]||this[se](e,p.value)),p.now=a,p.maxAge=s,p.value=r,this[oe]+=l-p.length,p.length=l,this.get(e),Le(this),!0}const h=new ki(e,r,l,a,s);return h.length>this[pe]?(this[se]&&this[se](e,r),!1):(this[oe]+=h.length,this[X].unshift(h),this[z].set(e,this[X].head),Le(this),!0)}has(e){if(!this[z].has(e))return!1;const r=this[z].get(e).value;return!Ve(this,r)}get(e){return ht(this,e,!0)}peek(e){return ht(this,e,!1)}pop(){const e=this[X].tail;return e?(ve(this,e),e.value):null}del(e){ve(this,this[z].get(e))}load(e){this.reset();const r=Date.now();for(let s=e.length-1;s>=0;s--){const a=e[s],l=a.e||0;if(l===0)this.set(a.k,a.v);else{const h=l-r;h>0&&this.set(a.k,a.v,h)}}}prune(){this[z].forEach((e,r)=>ht(this,r,!1))}}const ht=(i,e,r)=>{const s=i[z].get(e);if(s){const a=s.value;if(Ve(i,a)){if(ve(i,s),!i[Ne])return}else r&&(i[Ur]&&(s.value.now=Date.now()),i[X].unshiftNode(s));return a.value}},Ve=(i,e)=>{if(!e||!e.maxAge&&!i[de])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:i[de]&&r>i[de]},Le=i=>{if(i[oe]>i[pe])for(let e=i[X].tail;i[oe]>i[pe]&&e!==null;){const r=e.prev;ve(i,e),e=r}},ve=(i,e)=>{if(e){const r=e.value;i[se]&&i[se](r.key,r.value),i[oe]-=r.length,i[z].delete(r.key),i[X].removeNode(e)}};class ki{constructor(e,r,s,a,l){this.key=e,this.value=r,this.length=s,this.now=a,this.maxAge=l||0}}const Zt=(i,e,r,s)=>{let a=r.value;Ve(i,a)&&(ve(i,r),i[Ne]||(a=void 0)),a&&e.call(s,a.value,a.key,i)};var Vi=ji,ft,Qt;function Z(){if(Qt)return ft;Qt=1;class i{constructor(w,T){if(T=s(T),w instanceof i)return w.loose===!!T.loose&&w.includePrerelease===!!T.includePrerelease?w:new i(w.raw,T);if(w instanceof a)return this.raw=w.value,this.set=[[w]],this.format(),this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=w.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter($=>!A($[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const $ of this.set)if($.length===1&&M($[0])){this.set=[$];break}}}this.format()}format(){return this.range=this.set.map(w=>w.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(w){const L=((this.options.includePrerelease&&N)|(this.options.loose&&I))+":"+w,$=r.get(L);if($)return $;const v=this.options.loose,S=v?u[p.HYPHENRANGELOOSE]:u[p.HYPHENRANGE];w=w.replace(S,rt(this.options.includePrerelease)),l("hyphen replace",w),w=w.replace(u[p.COMPARATORTRIM],E),l("comparator trim",w),w=w.replace(u[p.TILDETRIM],m),l("tilde trim",w),w=w.replace(u[p.CARETTRIM],y),l("caret trim",w);let U=w.split(" ").map(D=>K(D,this.options)).join(" ").split(/\s+/).map(D=>tt(D,this.options));v&&(U=U.filter(D=>(l("loose invalid filter",D,this.options),!!D.match(u[p.COMPARATORLOOSE])))),l("range list",U);const R=new Map,O=U.map(D=>new a(D,this.options));for(const D of O){if(A(D))return[D];R.set(D.value,D)}R.size>1&&R.has("")&&R.delete("");const q=[...R.values()];return r.set(L,q),q}intersects(w,T){if(!(w instanceof i))throw new TypeError("a Range is required");return this.set.some(L=>V(L,T)&&w.set.some($=>V($,T)&&L.every(v=>$.every(S=>v.intersects(S,T)))))}test(w){if(!w)return!1;if(typeof w=="string")try{w=new h(w,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(nt(this.set[T],w,this.options))return!0;return!1}}ft=i;const e=Vi,r=new e({max:1e3}),s=Rt,a=ze(),l=Ke,h=W,{safeRe:u,t:p,comparatorTrimReplace:E,tildeTrimReplace:m,caretTrimReplace:y}=Be,{FLAG_INCLUDE_PRERELEASE:N,FLAG_LOOSE:I}=We,A=x=>x.value==="<0.0.0-0",M=x=>x.value==="",V=(x,w)=>{let T=!0;const L=x.slice();let $=L.pop();for(;T&&L.length;)T=L.every(v=>$.intersects(v,w)),$=L.pop();return T},K=(x,w)=>(l("comp",x,w),x=ne(x,w),l("caret",x),x=Q(x,w),l("tildes",x),x=Ue(x,w),l("xrange",x),x=et(x,w),l("stars",x),x),k=x=>!x||x.toLowerCase()==="x"||x==="*",Q=(x,w)=>x.trim().split(/\s+/).map(T=>Ze(T,w)).join(" "),Ze=(x,w)=>{const T=w.loose?u[p.TILDELOOSE]:u[p.TILDE];return x.replace(T,(L,$,v,S,U)=>{l("tilde",x,L,$,v,S,U);let R;return k($)?R="":k(v)?R=`>=${$}.0.0 <${+$+1}.0.0-0`:k(S)?R=`>=${$}.${v}.0 <${$}.${+v+1}.0-0`:U?(l("replaceTilde pr",U),R=`>=${$}.${v}.${S}-${U} <${$}.${+v+1}.0-0`):R=`>=${$}.${v}.${S} <${$}.${+v+1}.0-0`,l("tilde return",R),R})},ne=(x,w)=>x.trim().split(/\s+/).map(T=>_e(T,w)).join(" "),_e=(x,w)=>{l("caret",x,w);const T=w.loose?u[p.CARETLOOSE]:u[p.CARET],L=w.includePrerelease?"-0":"";return x.replace(T,($,v,S,U,R)=>{l("caret",x,$,v,S,U,R);let O;return k(v)?O="":k(S)?O=`>=${v}.0.0${L} <${+v+1}.0.0-0`:k(U)?v==="0"?O=`>=${v}.${S}.0${L} <${v}.${+S+1}.0-0`:O=`>=${v}.${S}.0${L} <${+v+1}.0.0-0`:R?(l("replaceCaret pr",R),v==="0"?S==="0"?O=`>=${v}.${S}.${U}-${R} <${v}.${S}.${+U+1}-0`:O=`>=${v}.${S}.${U}-${R} <${v}.${+S+1}.0-0`:O=`>=${v}.${S}.${U}-${R} <${+v+1}.0.0-0`):(l("no pr"),v==="0"?S==="0"?O=`>=${v}.${S}.${U}${L} <${v}.${S}.${+U+1}-0`:O=`>=${v}.${S}.${U}${L} <${v}.${+S+1}.0-0`:O=`>=${v}.${S}.${U} <${+v+1}.0.0-0`),l("caret return",O),O})},Ue=(x,w)=>(l("replaceXRanges",x,w),x.split(/\s+/).map(T=>Qe(T,w)).join(" ")),Qe=(x,w)=>{x=x.trim();const T=w.loose?u[p.XRANGELOOSE]:u[p.XRANGE];return x.replace(T,(L,$,v,S,U,R)=>{l("xRange",x,L,$,v,S,U,R);const O=k(v),q=O||k(S),D=q||k(U),ce=D;return $==="="&&ce&&($=""),R=w.includePrerelease?"-0":"",O?$===">"||$==="<"?L="<0.0.0-0":L="*":$&&ce?(q&&(S=0),U=0,$===">"?($=">=",q?(v=+v+1,S=0,U=0):(S=+S+1,U=0)):$==="<="&&($="<",q?v=+v+1:S=+S+1),$==="<"&&(R="-0"),L=`${$+v}.${S}.${U}${R}`):q?L=`>=${v}.0.0${R} <${+v+1}.0.0-0`:D&&(L=`>=${v}.${S}.0${R} <${v}.${+S+1}.0-0`),l("xRange return",L),L})},et=(x,w)=>(l("replaceStars",x,w),x.trim().replace(u[p.STAR],"")),tt=(x,w)=>(l("replaceGTE0",x,w),x.trim().replace(u[w.includePrerelease?p.GTE0PRE:p.GTE0],"")),rt=x=>(w,T,L,$,v,S,U,R,O,q,D,ce,it)=>(k(L)?T="":k($)?T=`>=${L}.0.0${x?"-0":""}`:k(v)?T=`>=${L}.${$}.0${x?"-0":""}`:S?T=`>=${T}`:T=`>=${T}${x?"-0":""}`,k(O)?R="":k(q)?R=`<${+O+1}.0.0-0`:k(D)?R=`<${O}.${+q+1}.0-0`:ce?R=`<=${O}.${q}.${D}-${ce}`:x?R=`<${O}.${q}.${+D+1}-0`:R=`<=${R}`,`${T} ${R}`.trim()),nt=(x,w,T)=>{for(let L=0;L<x.length;L++)if(!x[L].test(w))return!1;if(w.prerelease.length&&!T.includePrerelease){for(let L=0;L<x.length;L++)if(l(x[L].semver),x[L].semver!==a.ANY&&x[L].semver.prerelease.length>0){const $=x[L].semver;if($.major===w.major&&$.minor===w.minor&&$.patch===w.patch)return!0}return!1}return!0};return ft}var pt,er;function ze(){if(er)return pt;er=1;const i=Symbol("SemVer ANY");class e{static get ANY(){return i}constructor(m,y){if(y=r(y),m instanceof e){if(m.loose===!!y.loose)return m;m=m.value}m=m.trim().split(/\s+/).join(" "),h("comparator",m,y),this.options=y,this.loose=!!y.loose,this.parse(m),this.semver===i?this.value="":this.value=this.operator+this.semver.version,h("comp",this)}parse(m){const y=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],N=m.match(y);if(!N)throw new TypeError(`Invalid comparator: ${m}`);this.operator=N[1]!==void 0?N[1]:"",this.operator==="="&&(this.operator=""),N[2]?this.semver=new u(N[2],this.options.loose):this.semver=i}toString(){return this.value}test(m){if(h("Comparator.test",m,this.options.loose),this.semver===i||m===i)return!0;if(typeof m=="string")try{m=new u(m,this.options)}catch{return!1}return l(m,this.operator,this.semver,this.options)}intersects(m,y){if(!(m instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new p(m.value,y).test(this.value):m.operator===""?m.value===""?!0:new p(this.value,y).test(m.semver):(y=r(y),y.includePrerelease&&(this.value==="<0.0.0-0"||m.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||m.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&m.operator.startsWith(">")||this.operator.startsWith("<")&&m.operator.startsWith("<")||this.semver.version===m.semver.version&&this.operator.includes("=")&&m.operator.includes("=")||l(this.semver,"<",m.semver,y)&&this.operator.startsWith(">")&&m.operator.startsWith("<")||l(this.semver,">",m.semver,y)&&this.operator.startsWith("<")&&m.operator.startsWith(">")))}}pt=e;const r=Rt,{safeRe:s,t:a}=Be,l=_r,h=Ke,u=W,p=Z();return pt}const Xi=Z(),Hi=(i,e,r)=>{try{e=new Xi(e,r)}catch{return!1}return e.test(i)};var Je=Hi;const qi=Z(),Wi=(i,e)=>new qi(i,e).set.map(r=>r.map(s=>s.value).join(" ").trim().split(" "));var Ki=Wi;const Yi=W,zi=Z(),Ji=(i,e,r)=>{let s=null,a=null,l=null;try{l=new zi(e,r)}catch{return null}return i.forEach(h=>{l.test(h)&&(!s||a.compare(h)===-1)&&(s=h,a=new Yi(s,r))}),s};var Zi=Ji;const Qi=W,es=Z(),ts=(i,e,r)=>{let s=null,a=null,l=null;try{l=new es(e,r)}catch{return null}return i.forEach(h=>{l.test(h)&&(!s||a.compare(h)===1)&&(s=h,a=new Qi(s,r))}),s};var rs=ts;const dt=W,ns=Z(),tr=Ye,is=(i,e)=>{i=new ns(i,e);let r=new dt("0.0.0");if(i.test(r)||(r=new dt("0.0.0-0"),i.test(r)))return r;r=null;for(let s=0;s<i.set.length;++s){const a=i.set[s];let l=null;a.forEach(h=>{const u=new dt(h.semver.version);switch(h.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!l||tr(u,l))&&(l=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${h.operator}`)}}),l&&(!r||tr(r,l))&&(r=l)}return r&&i.test(r)?r:null};var ss=is;const os=Z(),as=(i,e)=>{try{return new os(i,e).range||"*"}catch{return null}};var cs=as;const us=W,Cr=ze(),{ANY:ls}=Cr,hs=Z(),fs=Je,rr=Ye,nr=Lt,ps=Tt,ds=$t,Es=(i,e,r,s)=>{i=new us(i,s),e=new hs(e,s);let a,l,h,u,p;switch(r){case">":a=rr,l=ps,h=nr,u=">",p=">=";break;case"<":a=nr,l=ds,h=rr,u="<",p="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(fs(i,e,s))return!1;for(let E=0;E<e.set.length;++E){const m=e.set[E];let y=null,N=null;if(m.forEach(I=>{I.semver===ls&&(I=new Cr(">=0.0.0")),y=y||I,N=N||I,a(I.semver,y.semver,s)?y=I:h(I.semver,N.semver,s)&&(N=I)}),y.operator===u||y.operator===p||(!N.operator||N.operator===u)&&l(i,N.semver))return!1;if(N.operator===p&&h(i,N.semver))return!1}return!0};var St=Es;const gs=St,ms=(i,e,r)=>gs(i,e,">",r);var ys=ms;const ws=St,Is=(i,e,r)=>ws(i,e,"<",r);var xs=Is;const ir=Z(),vs=(i,e,r)=>(i=new ir(i,r),e=new ir(e,r),i.intersects(e,r));var Rs=vs;const As=Je,Ls=J;var $s=(i,e,r)=>{const s=[];let a=null,l=null;const h=i.sort((m,y)=>Ls(m,y,r));for(const m of h)As(m,e,r)?(l=m,a||(a=m)):(l&&s.push([a,l]),l=null,a=null);a&&s.push([a,null]);const u=[];for(const[m,y]of s)m===y?u.push(m):!y&&m===h[0]?u.push("*"):y?m===h[0]?u.push(`<=${y}`):u.push(`${m} - ${y}`):u.push(`>=${m}`);const p=u.join(" || "),E=typeof e.raw=="string"?e.raw:String(e);return p.length<E.length?p:e};const sr=Z(),Nt=ze(),{ANY:Et}=Nt,$e=Je,Ot=J,Ts=(i,e,r={})=>{if(i===e)return!0;i=new sr(i,r),e=new sr(e,r);let s=!1;e:for(const a of i.set){for(const l of e.set){const h=Ns(a,l,r);if(s=s||h!==null,h)continue e}if(s)return!1}return!0},Ss=[new Nt(">=0.0.0-0")],or=[new Nt(">=0.0.0")],Ns=(i,e,r)=>{if(i===e)return!0;if(i.length===1&&i[0].semver===Et){if(e.length===1&&e[0].semver===Et)return!0;r.includePrerelease?i=Ss:i=or}if(e.length===1&&e[0].semver===Et){if(r.includePrerelease)return!0;e=or}const s=new Set;let a,l;for(const I of i)I.operator===">"||I.operator===">="?a=ar(a,I,r):I.operator==="<"||I.operator==="<="?l=cr(l,I,r):s.add(I.semver);if(s.size>1)return null;let h;if(a&&l){if(h=Ot(a.semver,l.semver,r),h>0)return null;if(h===0&&(a.operator!==">="||l.operator!=="<="))return null}for(const I of s){if(a&&!$e(I,String(a),r)||l&&!$e(I,String(l),r))return null;for(const A of e)if(!$e(I,String(A),r))return!1;return!0}let u,p,E,m,y=l&&!r.includePrerelease&&l.semver.prerelease.length?l.semver:!1,N=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1;y&&y.prerelease.length===1&&l.operator==="<"&&y.prerelease[0]===0&&(y=!1);for(const I of e){if(m=m||I.operator===">"||I.operator===">=",E=E||I.operator==="<"||I.operator==="<=",a){if(N&&I.semver.prerelease&&I.semver.prerelease.length&&I.semver.major===N.major&&I.semver.minor===N.minor&&I.semver.patch===N.patch&&(N=!1),I.operator===">"||I.operator===">="){if(u=ar(a,I,r),u===I&&u!==a)return!1}else if(a.operator===">="&&!$e(a.semver,String(I),r))return!1}if(l){if(y&&I.semver.prerelease&&I.semver.prerelease.length&&I.semver.major===y.major&&I.semver.minor===y.minor&&I.semver.patch===y.patch&&(y=!1),I.operator==="<"||I.operator==="<="){if(p=cr(l,I,r),p===I&&p!==l)return!1}else if(l.operator==="<="&&!$e(l.semver,String(I),r))return!1}if(!I.operator&&(l||a)&&h!==0)return!1}return!(a&&E&&!l&&h!==0||l&&m&&!a&&h!==0||N||y)},ar=(i,e,r)=>{if(!i)return e;const s=Ot(i.semver,e.semver,r);return s>0?i:s<0||e.operator===">"&&i.operator===">="?e:i},cr=(i,e,r)=>{if(!i)return e;const s=Ot(i.semver,e.semver,r);return s<0?i:s>0||e.operator==="<"&&i.operator==="<="?e:i};var Os=Ts;const gt=Be,ur=We,Bs=W,lr=Nr,_s=Re,Us=_n,Cs=bn,bs=Dn,Fs=Mn,Ds=kn,Ps=Hn,Ms=Kn,Gs=Jn,js=J,ks=ti,Vs=ii,Xs=At,Hs=ci,qs=hi,Ws=Ye,Ks=Lt,Ys=Or,zs=Br,Js=$t,Zs=Tt,Qs=_r,eo=Ci,to=ze(),ro=Z(),no=Je,io=Ki,so=Zi,oo=rs,ao=ss,co=cs,uo=St,lo=ys,ho=xs,fo=Rs,po=$s,Eo=Os;var go={parse:_s,valid:Us,clean:Cs,inc:bs,diff:Fs,major:Ds,minor:Ps,patch:Ms,prerelease:Gs,compare:js,rcompare:ks,compareLoose:Vs,compareBuild:Xs,sort:Hs,rsort:qs,gt:Ws,lt:Ks,eq:Ys,neq:zs,gte:Js,lte:Zs,cmp:Qs,coerce:eo,Comparator:to,Range:ro,satisfies:no,toComparators:io,maxSatisfying:so,minSatisfying:oo,minVersion:ao,validRange:co,outside:uo,gtr:lo,ltr:ho,intersects:fo,simplifyRange:po,subset:Eo,SemVer:Bs,re:gt.re,src:gt.src,tokens:gt.t,SEMVER_SPEC_VERSION:ur.SEMVER_SPEC_VERSION,RELEASE_TYPES:ur.RELEASE_TYPES,compareIdentifiers:lr.compareIdentifiers,rcompareIdentifiers:lr.rcompareIdentifiers};const hr=mr(go);var H;(function(i){i.blue="blue",i.nanoS="nanoS",i.nanoSP="nanoSP",i.nanoX="nanoX",i.stax="stax"})(H||(H={}));const wt={[H.blue]:{id:H.blue,productName:"LedgerBlue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:i=>4*1024},[H.nanoS]:{id:H.nanoS,productName:"LedgerNanoS",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:i=>{var e;return hr.lt((e=hr.coerce(i))!==null&&e!==void 0?e:"","2.0.0")?4*1024:2*1024}},[H.nanoSP]:{id:H.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1536*1024,masks:[856686592],getBlockSize:i=>32},[H.nanoX]:{id:H.nanoX,productName:"LedgerNanoX",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:i=>4*1024,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[H.stax]:{id:H.stax,productName:"LedgerStax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1536*1024,masks:[857735168],getBlockSize:i=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]}};H.blue,H.nanoS,H.nanoSP,H.nanoX,H.stax;const fr=Object.values(wt),br=11415,Fr=i=>{const e=fr.find(a=>a.legacyUsbProductId===i);if(e)return e;const r=i>>8;return fr.find(a=>a.productIdMM===r)},mo=[],pr={};for(const i in wt){const e=wt[i],{bluetoothSpec:r}=e;if(r)for(let s=0;s<r.length;s++){const a=r[s];mo.push(a.serviceUuid),pr[a.serviceUuid]=pr[a.serviceUuid.replace(/-/g,"")]=Object.assign({deviceModel:e},a)}}var yo=0,le=[],dr=function(i,e,r){var s={type:i,id:String(++yo),date:new Date};e&&(s.message=e),r&&(s.data=r),Io(s)},wo=function(i){return le.push(i),function(){var e=le.indexOf(i);e!==-1&&(le[e]=le[le.length-1],le.pop())}};function Io(i){for(var e=0;e<le.length;e++)try{le[e](i)}catch(r){console.error(r)}}typeof window<"u"&&(window.__ledgerLogsListen=wo);var ae=globalThis&&globalThis.__awaiter||function(i,e,r,s){function a(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function u(m){try{E(s.next(m))}catch(y){h(y)}}function p(m){try{E(s.throw(m))}catch(y){h(y)}}function E(m){m.done?l(m.value):a(m.value).then(u,p)}E((s=s.apply(i,e||[])).next())})};const xo=[{vendorId:br}],vo=()=>Promise.resolve(!!(window.navigator&&window.navigator.hid)),Xe=()=>{const{hid:i}=navigator;if(!i)throw new he("navigator.hid is not supported","HIDNotSupported");return i};function Dr(){return ae(this,void 0,void 0,function*(){const i=yield Xe().requestDevice({filters:xo});return Array.isArray(i)?i:[i]})}function Bt(){return ae(this,void 0,void 0,function*(){return(yield Xe().getDevices()).filter(e=>e.vendorId===br)})}function Ro(){return ae(this,void 0,void 0,function*(){const i=yield Bt();return i.length>0?i[0]:(yield Dr())[0]})}class fe extends vt{constructor(e){super(),this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.inputs=[],this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise(r=>{this.inputCallback=r}),this.onInputReport=r=>{const s=Buffer.from(r.data.buffer);this.inputCallback?(this.inputCallback(s),this.inputCallback=null):this.inputs.push(s)},this._disconnectEmitted=!1,this._emitDisconnect=r=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",r))},this.exchange=r=>ae(this,void 0,void 0,function*(){return yield this.exchangeAtomicImpl(()=>ae(this,void 0,void 0,function*(){const{channel:a,packetSize:l}=this;dr("apdu","=> "+r.toString("hex"));const h=gn(a,l),u=h.makeBlocks(r);for(let m=0;m<u.length;m++)yield this.device.sendReport(0,u[m]);let p,E;for(;!(p=h.getReducedResult(E));){const m=yield this.read();E=h.reduceResponse(E,m)}return dr("apdu","<= "+p.toString("hex")),p})).catch(a=>{throw a&&a.message&&a.message.includes("write")?(this._emitDisconnect(a),new hn(a.message)):a})}),this.device=e,this.deviceModel=typeof e.productId=="number"?Fr(e.productId):void 0,e.addEventListener("inputreport",this.onInputReport)}static request(){return ae(this,void 0,void 0,function*(){const[e]=yield Dr();return fe.open(e)})}static openConnected(){return ae(this,void 0,void 0,function*(){const e=yield Bt();return e.length===0?null:fe.open(e[0])})}static open(e){return ae(this,void 0,void 0,function*(){yield e.open();const r=new fe(e),s=a=>{e===a.device&&(Xe().removeEventListener("disconnect",s),r._emitDisconnect(new ln))};return Xe().addEventListener("disconnect",s),r})}close(){return ae(this,void 0,void 0,function*(){yield this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),yield this.device.close()})}setScrambleKey(){}}fe.isSupported=vo;fe.list=Bt;fe.listen=i=>{let e=!1;Ro().then(s=>{if(!s)i.error(new Pt("Access denied to use Ledger device"));else if(!e){const a=typeof s.productId=="number"?Fr(s.productId):void 0;i.next({type:"add",descriptor:s,deviceModel:a}),i.complete()}},s=>{i.error(new Pt(s.message))});function r(){e=!0}return{unsubscribe:r}};const Te=224,Ao=1,Lo=2,$o=3,To=4,So=5,ie=36864,Ge=27013,Er=27750,je=27904,No=1,Oo=2,Bo=4,gr=8;class _o{constructor(e,r="l0v"){this.transport=void 0,this.transport=e,e.decorateAppAPIMethods(this,["getConfiguration","getPublicKey","getAddress","signMessage","signTransaction"],r)}getConfiguration(){return this.transport.send(Te,Ao,0,0).then(e=>{if(P.Buffer.from(e.slice(e.length-2)).readUInt16BE(0)===ie)return{configuration:e.slice()};throw new Error("Failed to get configuration")})}getPublicKey({account:e},r=!1){const s=P.Buffer.alloc(4);return s.writeUInt32BE(e),this.transport.send(Te,Lo,r?1:0,0,s,[ie]).then(a=>{if(P.Buffer.from(a.slice(a.length-2)).readUInt16BE(0)===ie)return{publicKey:a.slice(1,33)};throw new Error("Failed to get public key")})}getAddress({account:e,contract:r}){const s=P.Buffer.alloc(5);return s.writeUInt32BE(e,0),s.writeUint8(r,4),this.transport.send(Te,To,1,0,s,[ie]).then(a=>{if(P.Buffer.from(a.slice(a.length-2)).readUInt16BE(0)===ie)return{address:a.slice(1,33)};throw new Error("Failed to get address")})}signMessage({account:e,message:r,chainId:s}){let a=0;const l=[],h=P.Buffer.alloc(4);if(h.writeUInt32BE(e,0),typeof s=="number"){const E=P.Buffer.alloc(4);E.writeUInt32BE(s,0),a|=gr,l.push(E)}const u=[h,P.Buffer.alloc(1,a),...l,r],p=P.Buffer.concat(u);return this.transport.send(Te,$o,1,0,p,[ie,Ge,Er,je]).then(E=>{const m=P.Buffer.from(E.slice(E.length-2)).readUInt16BE(0);if(m===ie)return{signature:E.slice(1,E.length-2)};throw m===Ge?new Error("Transaction approval request was rejected"):m===je?new Error("Message signing is not supported"):new Error("Message signing not allowed. Have you enabled it in the app settings?")})}signTransaction({account:e,originalWallet:r,wallet:s,message:a,chainId:l,context:h}){let u=0;const p=[],E=P.Buffer.alloc(5);E.writeUInt32BE(e,0),E.writeUint8(r,4);const m=P.Buffer.alloc(1);m.writeUInt8(h.decimals,0);let y=h.asset;h.asset.includes("-LP-")?y="LP":h.asset.length>8&&(y=h.asset.substring(0,6)+"..");const N=P.Buffer.from(y,"utf-8");if(typeof s=="number"&&s!==r&&(u|=No,p.push(P.Buffer.alloc(1,s))),typeof h.workchainId=="number"&&(u|=Oo,p.push(P.Buffer.alloc(1,h.workchainId))),typeof h.address=="string"){if(h.address.length!==64)throw new Error("Invalid address format");u|=Bo,p.push(P.Buffer.from(h.address,"hex"))}if(typeof l=="number"){const M=P.Buffer.alloc(4);M.writeUInt32BE(l,0),u|=gr,p.push(M)}const I=[E,m,P.Buffer.alloc(1,N.length),N,P.Buffer.alloc(1,u),...p,a.subarray(4)],A=P.Buffer.concat(I);return this.transport.send(Te,So,1,0,A,[ie,Ge,Er,je]).then(M=>{const V=P.Buffer.from(M.slice(M.length-2)).readUInt16BE(0);if(V===ie)return{signature:M.slice(1,M.length-2)};throw V===Ge?new Error("Transaction approval request was rejected"):V===je?new Error("Message signing is not supported"):new Error("Message signing not allowed. Have you enabled it in the app settings?")})}}class Uo{constructor(){this.addEventListeners()}addEventListeners(){window.addEventListener("message",async e=>{if(e&&e.data&&e.data.target==="LEDGER-IFRAME"){const{action:r,params:s}=e.data,a=`${r}-reply`;switch(r){case"ledger-get-configuration":await this.getConfiguration(a);break;case"ledger-get-public-key":await this.getPublicKey(a,s);break;case"ledger-get-address":await this.getAddress(a,s);break;case"ledger-sign-message":await this.signMessage(a,s);break;case"ledger-sign-transaction":await this.signTransaction(a,s);break;case"ledger-close-bridge":await this.cleanUp(a);break}}},!1)}sendMessageToExtension(e){window.parent.postMessage(e,"*")}async makeApp(){try{this.transport=await fe.create(),this.app=new _o(this.transport)}catch(e){throw console.log("LEDGER:::CREATE APP ERROR",e),e}}async cleanUp(e){this.app=null,this.transport&&await this.transport.close(),e&&this.sendMessageToExtension({action:e,success:!0})}async getConfiguration(e){try{await this.makeApp();const r=await this.app.getConfiguration();this.sendMessageToExtension({action:e,success:!0,payload:r})}catch(r){const s=this.ledgerErrToMessage(r);this.sendMessageToExtension({action:e,success:!1,error:new Error(s.toString())})}finally{await this.cleanUp()}}async getPublicKey(e,r){try{await this.makeApp();const s=await this.app.getPublicKey(r);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const a=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(a.toString())})}finally{await this.cleanUp()}}async getAddress(e,r){try{await this.makeApp();const s=await this.app.getAddress(r);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const a=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(a.toString())})}finally{await this.cleanUp()}}async signMessage(e,r){try{await this.makeApp();const s=await this.app.signMessage(r);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const a=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(a.toString())})}finally{await this.cleanUp()}}async signTransaction(e,r){try{await this.makeApp();const s=await this.app.signTransaction(r);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const a=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(a.toString())})}finally{await this.cleanUp()}}ledgerErrToMessage(e){const r=u=>String(u.message||u).includes("0x6700"),s=u=>String(u.message||u).includes("0x6804"),a=u=>u.name&&u.name.includes("TransportOpenUserCancelled"),l=u=>u.message&&u.message.includes("Message signing is not supported"),h=u=>u.message&&u.message.includes("Transaction approval request was rejected");return r(e)?"LEDGER_WRONG_APP":s(e)?"LEDGER_LOCKED":h(e)?"TRANSACTION_REJECTED":l(e)?"SIGN_NON_SUPPORTED":a(e)&&e.message&&e.message.includes("Access denied to use Ledger device")?"USER_DENIED":a(e)&&e.message&&e.message.includes("Failed to execute 'requestDevice' on 'HID'")?"USER_CANCELLED":e.toString()}}(()=>{const e=new URLSearchParams(window.location.search).get("theme")||"default",r=document.querySelector(`[data-theme="${e}"]`);r.style.display=null;const s=new Uo,a=r.querySelector('[data-action="pairing"]');a&&a.addEventListener("click",()=>s.getConfiguration());const l=r.querySelector('[data-action="back"]');l&&l.addEventListener("click",()=>s.cleanUp("ledger-bridge-back")),console.log(`EVER Wallet <=> Ledger Bridge initialized from ${window.location}!`)})();
